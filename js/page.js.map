{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","src/js/page/index.js","node_modules/browserify/node_modules/events/events.js","node_modules/browserify/node_modules/process/browser.js","node_modules/regenerator-runtime/runtime.js","src/js/page/gzip.js","src/js/page/load-scripts.js","src/js/page/main-controller.js","src/js/page/prism.js","src/js/page/results-cache.js","src/js/page/svg-file.js","src/js/page/svgo.js","src/js/page/ui/bg-fill.js","src/js/page/ui/changelog.js","src/js/page/ui/code-output.js","src/js/page/ui/copy-button.js","src/js/page/ui/download-button.js","src/js/page/ui/file-drop.js","src/js/page/ui/main-menu.js","src/js/page/ui/main-ui.js","src/js/page/ui/material-slider.js","src/js/page/ui/output.js","src/js/page/ui/pan-zoom.js","src/js/page/ui/preloader.js","src/js/page/ui/results-container.js","src/js/page/ui/results.js","src/js/page/ui/ripple.js","src/js/page/ui/settings.js","src/js/page/ui/spinner.js","src/js/page/ui/svg-output.js","src/js/page/ui/toasts.js","src/js/page/ui/view-toggler.js","src/js/page/utils.js","src/js/page/worker-messenger.js","src/js/utils/indexeddouchbag.js","src/js/utils/storage.js"],"names":[],"mappings":"AAAA;ACAA,YACA,IAAI,aAAc,QAAQ,kBACtB,kBAEC,QAAO,SACV,gBAAgB,KAAK,0BAInB,iBAAiB,KAAK,UAAU,YAClC,gBAAgB,KAAK,mBAGvB,YAAY,gBAAiB,WAC3B,QAAQ,+BACR,QAAQ,WAAW,mBACnB,IAAK,QAAQ,uBACZ,WACD,QAAQ,MAAM;;;;AClBhB;;ACAA;;ACAA;AACA;AACA;AACA;;ACHA,s/BAEM,KAAI,SAAA,GACG,QADP,0BAAA,GAEF,KAAA,OAAA,eAFE,EAAI,WAAA,cAAA,MAAA,KAAA,KAEA,sCAFJ,EAAI,gBAAJ,yBAKI,SAAC,GACP,MAAO,MAAK,kBACV,KAAM,QAPN,GAAa,QAAQ,sBAY3B,QAAO,QAAU;;;;ACdjB,YAIA,QAAO,QAAU,SAAoB,EAAM,EAAa,GACtD,GAAI,GAAQ,EAAK,OACb,GAAU,CAEd,OAAmB,IAAf,EAAK,OAAoB,QAE7B,GAAK,QAAQ,SAAA,GACX,GAAI,GAAS,SAAS,cAAc,SACpC,GAAO,OAAS,WACV,KACG,GAAO,KAEhB,EAAO,QAAU,WACX,IACJ,IACA,GAAU,IAEZ,EAAO,IAAM,EACb,SAAS,KAAK,aAAa,EAAQ,SAAS,KAAK;;;;ACtBrD,6XAEI,MAAQ,QAAQ,WAChB,KAAO,IAAK,QAAQ,WACpB,QAAU,QAAQ,oBAElB,QAAU,QAAQ,cAEhB,eAAc,WACP,QADP,qCAAA,GAEF,KAAK,WAAa,KAGlB,KAAK,QAAU,KACf,KAAK,UAAY,IAAK,QAAQ,gBAC9B,KAAK,kBAAoB,IAAK,QAAQ,yBACtC,KAAK,cAAgB,IAAK,QAAQ,qBAClC,KAAK,UAAY,IAAK,QAAQ,iBAC9B,KAAK,WAAa,IAAK,QAAQ,iBAC/B,KAAK,YAAc,IAAK,QAAQ,kBAChC,KAAK,YAAc,IAAK,QAAQ,mBAChC,KAAK,UAAY,IAAK,QAAQ,gBAC9B,KAAK,QAAU,IAAK,QAAQ,mBAC5B,KAAK,aAAe,IAAK,QAAQ,mBACjC,KAAK,aAAe,IAAK,QAAQ,mBAAmB,KAAK,SACzD,KAAK,oBAAsB,IAAK,QAAQ,2BAA2B,KAAK,YACxE,KAAK,eAAiB,IAAK,QAAQ,sBAGnC,KAAK,YAAY,GAAG,SAAU,SAAA,SAAK,GAAK,sBACxC,KAAK,YAAY,GAAG,cAAe,SAAA,SAAK,GAAK,eAAe,KAC5D,KAAK,QAAQ,GAAG,cAAe,SAAA,SAAK,GAAK,eAAe,KACxD,KAAK,YAAY,GAAG,QAAS,SAAC,MAAC,GAAD,EAAC,YAAW,GAAK,aAAa,KAC5D,KAAK,eAAe,GAAG,SAAU,SAAA,SAAK,GAAK,uBAAuB,KAGlE,KAAK,eAAiB,YACtB,KAAK,UAAY,KACjB,KAAK,OAAS,IAAK,QAAQ,oBAAoB,IAC/C,KAAK,qBAAuB,EAC5B,KAAK,oBAAqB,EAEtB,iBAAmB,YACrB,UAAU,cAAc,SAAS,SAC/B,MAAO,OACN,KAAK,SAAA,GACN,EAAa,iBAAiB,cAAe,SAAA,SAAK,GAAK,eAAe,OAK1E,QAAQ,IAAI,qBAAqB,KAAK,SAAA,GAChC,GACF,EAAK,aAAa,YAAY,GAEhC,QAAQ,IAAI,oBAAqB,KAAK,WAGxC,MAAM,SAAS,KAAK,SAAA,GAClB,EAAK,WAAa,SAAS,cAAc,eAGzC,EAAK,QAAU,IAAK,QAAQ,iBAC1B,SAAS,cAAc,YACvB,SAAS,cAAc,4BACvB,EAAK,UAAU,UACf,EAAK,YAAY,UAGnB,IAAM,GAAkB,SAAS,cAAc,4BACzC,EAAuB,SAAS,cAAc,0BAEpD,GAAqB,YAAY,EAAK,UAAU,WAE5C,SAAS,uBAAyB,SAAS,sBAAsB,SACnE,EAAqB,YAAY,EAAK,cAAc,WAGtD,EAAgB,YAAY,EAAK,kBAAkB,WACnD,SAAS,cAAc,WAAW,YAAY,EAAK,UAAU,WAC7D,EAAK,WAAW,YAAY,EAAK,UAAU,WAC3C,EAAK,WAAW,YAAY,EAAK,QAAQ,WACzC,SAAS,cAAc,eAAe,YAAY,EAAK,aAAa,WAGhE,EAAK,aAAa,WACpB,EAAK,UAAU,KAAK,cAClB,SAAU,4BA/Ed,uCA+FkB,SAAC,GACrB,KAAK,UAAU,IAAI,EAAM,qCAGb,SAAC,cACT,EAAY,EAAa,UAE7B,GAAa,WAAW,iBAAiB,cAAe,SAAM,MAWtD,GAaA,EAIA,qFAzBiB,aAAnB,EAAU,OAAyB,UAAU,cAAc,WAAU,sBACvE,MAAK,UAAU,KAAK,yBAClB,SAAU,mCAKS,aAAnB,EAAU,QAAwB,UAAU,cAAc,WAAU,0DAC5C,QAAQ,IAAI,6BAAlC,EAAa,EAAA,MAIb,GAAiB,EAAc,MAAM,KAAK,IAAM,KAAK,QAAQ,MAAM,KAAK,GAAE,oDAGzE,KAAK,mBAAkB,uBAC1B,UAAS,0CAKP,GAAQ,KAAK,UAAU,KAAK,oBAC9B,SAAU,SAAU,gDAGH,EAAM,gBAArB,EAAM,EAAA,KAEI,UAAV,GACF,SAAS,wFAMA,WACf,KAAK,6CAGa,SAAC,MAgBf,mGAfJ,MAAK,oBAAqB,6CAGD,KAAK,KAAK,EAAM,cAAvC,KAAK,UAAS,EAAA,KACd,KAAK,eAAiB,EAAM,gEAG5B,EAAA,GAAE,QAAU,gBAAkB,EAAA,GAAE,QAChC,KAAK,YAAY,cACjB,KAAK,aAAY,EAAA,+BAInB,KAAK,OAAO,QAER,GAAkB,EACtB,KAAK,aAAa,SAAA,GACZ,IACF,EAAK,UAAU,QACf,EAAK,QAAQ,WACb,EAAK,YAAY,WAAY,EAC7B,EAAK,YAAY,OACjB,GAAkB,wFAMZ,SAAC,GACX,KAAK,UAAU,KAAK,EAAE,SACtB,QAAQ,MAAM,+BAGE,cACZ,GACA,EAiBA,EAaE,EAhCW,EAAkB,UAAA,QAAA,GAAA,SAAA,UAAA,GAAG,aAAY,UAAA,mGAC9C,GAAY,KAAK,qBAAuB,KAAK,SAC7C,EAAW,KAAK,YAAY,gDAE1B,KAAK,0BAEP,GAAa,KAAK,qBAAoB,qDAMtC,EAAS,SAAQ,sBACnB,MAAK,eAAe,KAAK,WACvB,KAAM,EAAS,oCAKf,EAAa,KAAK,OAAO,MAAM,EAAS,cAExC,EAAU,uBACZ,MAAK,eAAe,GAClB,cAAe,KAAK,UACpB,KAAM,EAAS,wCAKnB,MAAK,kBAAkB,uDAGO,KAAK,QAAQ,EAAU,SAAA,GACjD,EAAmB,GACnB,EAAK,eAAe,GAClB,cAAe,EAAK,UACpB,KAAM,EAAS,kBAJf,EAAe,EAAA,KAOnB,KAAK,OAAO,IAAI,EAAS,YAAa,sDAGrB,SAAb,EAAA,GAAE,UACJ,EAAA,GAAE,QAAU,oBAAsB,EAAA,GAAE,QACpC,KAAK,aAAY,EAAA,aAIrB,KAAK,kBAAkB,8FAGL,SAAC,EAAS,MAAC,GAAD,EAAC,cAAe,EAAhB,EAAgB,wFAC5C,KAAK,UAAU,OAAO,GACtB,KAAK,kBAAkB,YAAY,KAAK,eAAgB,GACxD,KAAK,cAAc,OAAO,QAE1B,KAAK,gBACa,iEAAwB,EAAc,MAAO,SAAU,mFAC3D,EAAQ,MAAO,SAAU,+BADrC,eAAc,EAAA,GACd,KAAI,EAAA,SAFU,OAAM,KAAA,EAAA,GAAA,EAAA,uDAzOpB,IAgPN,QAAO,QAAU;;;;ACxPjB,s/BAEM,MAAK,SAAA,GACE,QADP,0BAAA,GAEF,KAAA,OAAA,eAFE,EAAK,WAAA,cAAA,MAAA,KAAA,KAED,uCAFJ,EAAK,gBAAL,0BAKK,SAAC,GACR,MAAO,MAAK,kBACV,KAAM,QAPN,GAAc,QAAQ,sBAY5B,QAAO,QAAU;;;;ACdjB,6XAEM,aAAY,WACL,QADP,GACQ,wBADR,GAEF,KAAK,MAAQ,EACb,KAAK,4BAHH,sBAMC,WACH,KAAK,iBACL,KAAK,UACL,KAAK,OAAS,qBAGb,SAAC,EAAa,GACf,GAAI,GAAU,KAAK,OAAO,KAAK,OAE3B,IAEF,EAAQ,UAGV,KAAK,cAAc,KAAK,QAAU,EAClC,KAAK,OAAO,KAAK,QAAU,EAE3B,KAAK,QAAU,KAAK,OAAS,GAAK,KAAK,2BAGpC,SAAC,GACJ,MAAO,MAAK,OAAO,KAAK,cAAc,QAAQ,QA3B5C,IA+BN,QAAO,QAAU;;;;ACjCjB,6XAEI,KAAO,IAAK,QAAQ,WAElB,QAAO,WACA,QADP,GACQ,EAAM,EAAO,wBADrB,GAEF,KAAK,KAAO,EACZ,KAAK,gBAAkB,KACvB,KAAK,KAAO,GACZ,KAAK,MAAQ,KACb,KAAK,MAAQ,EACb,KAAK,OAAS,sBAPZ,qBAUM,SAAC,MAAE,GAAF,EAAE,4FACN,EAAQ,yCACJ,KAAK,KAAK,qBAGd,MAAK,kBACR,KAAK,gBAAkB,KAAK,SAAS,KAAK,MACvC,KAAK,SAAA,SAAK,GAAE,gCAGV,KAAK,sFAGP,WAGL,KAAK,MAAQ,GAAI,OAAM,KAAK,OAAQ,KAAM,kBAC1C,KAAK,KAAO,IAAI,gBAAgB,KAAK,8BAahC,WACA,KAAK,OAIV,KAAK,MAAQ,KACb,IAAI,gBAAgB,KAAK,yBAhBnB,WAEN,MADK,MAAK,OAAO,KAAK,UACf,KAAK,uBAGP,WAEL,MADK,MAAK,MAAM,KAAK,UACd,KAAK,SArCV,IAkDN,QAAO,QAAU;;;;ACtDjB,s/BAEI,QAAU,QAAQ,cAEhB,KAAI,SAAA,GACG,QADP,0BAAA,GAEF,KAAA,OAAA,eAFE,EAAI,WAAA,cAAA,MAAA,KAAA,KAEA,qBACN,KAAK,YAAa,EAClB,KAAK,mBAAoB,EACzB,KAAK,YAAc,QAAQ,2BALzB,EAAI,gBAAJ,qBAQA,SAAC,GACH,MAAO,MAAK,kBACV,OAAQ,OACR,KAAM,IACL,KAAK,SAAC,MAAC,GAAD,EAAC,MAAO,EAAR,EAAQ,MACf,OAAO,IAAI,SAAQ,EAAS,EAAO,4BAIhC,SAAC,EAAU,aAChB,OAAO,MAAK,YAAc,KAAK,eAAe,KAAK,SAAM,MAGnD,GAKA,wFAPJ,MAAK,mBAAoB,oCAEN,KAAK,kBACtB,OAAQ,UACR,SAAA,eAFE,EAAM,EAAA,KAKN,EAAa,GAAI,SAAQ,EAAO,KAAM,EAAO,WAAW,MAAO,EAAO,WAAW,QAErF,EAAmB,IAEf,EAAS,UAAS,iEACE,KAAK,wBAApB,EAAM,EAAA,MAAA,qBACP,KAAK,kBAAiB,sBAClB,OAAM,iBAEd,EAAa,GAAI,SAAQ,EAAO,KAAM,EAAO,WAAW,MAAO,EAAO,WAAW,QACjF,EAAmB,mDAKhB,yEAIH,WACN,MAAO,MAAK,kBACV,OAAQ,yCAIM,iGAChB,MAAK,mBAAoB,6CAGjB,KAAK,6HAvDX,GAAa,QAAQ,sBA4D3B,QAAO,QAAU;;;;6XChEb,MAAQ,QAAQ,YAChB,OAAS,QAAQ,YAEf,aAAY,WACL,QADP,qCAAA,GAEF,KAAK,UAAY,MAAM,QACrB,ksCAQF,KAAK,QAAU,GAAI,QACnB,KAAK,UAAU,YAAY,KAAK,QAAQ,WAExC,KAAK,UAAU,iBAAiB,QAAS,SAAA,SAAS,GAAK,SAAS,yBAd9D,yBAiBI,SAAC,GAEH,KAAK,UAAU,UAAU,SAAS,WACpC,KAAK,UAAU,UAAU,OAAO,UAChC,KAAK,SAAS,iBAEd,KAAK,UAAU,UAAU,IAAI,UAC7B,KAAK,SAAS,YAEhB,KAAK,QAAQ,kCAGP,SAAC,GACP,SAAS,gBAAgB,MAAM,gBAAkB,MA9B/C,IAkCN,QAAO,QAAU;;;;4jBCrCb,MAAQ,QAAQ,YAEd,UAAS,WACF,QADP,GACQ,wBADR,GAEF,KAAK,UAAY,MAAM,QAAQ,yCAC/B,KAAK,eAAiB,sBAHpB,4BAMa,SAAC,MAEZ,GACA,EACA,EAEK,EACH,EAWF,qFAjBA,GAAqB,KAAK,eAAc,0FACtB,MAAM,IAAI,kBAAkB,KAAK,KAAK,eAAxD,EAAS,EAAA,KACT,EAAa,EACb,EAAW,EAEN,EAAI,cAAG,EAAI,EAAU,QAAM,oBAC9B,EAAQ,EAAU,GAElB,EAAM,UAAY,KAAK,eAAc,iBACvC,EAAa,6BAEN,EAAM,UAAY,EAAiB,qDAG5C,EAAW,EAAI,UATqB,iCAYlC,GAAY,EAAU,MAAM,EAAY,GAAU,OAAO,SAAC,EAAK,GACjE,MAAO,GAAI,OAAO,EAAM,cACnB,IAAI,SAAS,GAClB,MAAO,OAAM,cAAa,gBAAO,KAGnC,KAAK,UAAU,YAAY,MAAM,QAAQ,sBACzC,KAAK,UAAU,YAAY,MAAM,QAC/B,OACE,EAAU,KAAK,IACjB,6CAGI,MAAM,kBACZ,MAAM,kBAAkB,KAAK,8DAtC3B,IA0CN,QAAO,QAAU;;;;6XC5Cb,MAAQ,QAAQ,YAChB,MAAQ,IAAK,QAAQ,aAEnB,WAAU,WACH,QADP,0BAAA,GAEF,KAAK,UAAY,MAAM,QACrB,2DAIF,KAAK,QAAU,KAAK,UAAU,cAAc,4BAP1C,uBAUQ,SAAC,4HACoB,MAAM,UAAU,EAAQ,cAAvD,KAAK,QAAQ,UAAS,EAAA,wEAGnB,WACH,KAAK,QAAQ,UAAY,OAfvB,IAmBN,QAAO,QAAU;;;;6XCtBb,MAAQ,QAAQ,YAChB,OAAS,QAAQ,YAEf,WAAU,WACH,QADP,qCAAA,GAEF,KAAK,UAAY,MAAM,QACrB,yQAQF,KAAK,QAAU,GAAI,QACnB,KAAK,UAAU,YAAY,KAAK,QAAQ,WAExC,KAAK,SAAW,KAChB,KAAK,KAAO,SAAS,cAAc,OAEnC,KAAK,UAAU,iBAAiB,QAAS,SAAA,SAAS,GAAK,SAAS,yBAjB9D,yBAoBI,SAAC,GACP,KAAK,KAAK,YAAc,KAAK,SAAS,KACtC,SAAS,KAAK,YAAY,KAAK,MAC/B,eAAe,iBACf,IAAI,GAAQ,SAAS,aACrB,GAAM,WAAW,KAAK,MACtB,OAAO,eAAe,SAAS,GAC/B,SAAS,YAAY,QACrB,eAAe,kBACf,SAAS,KAAK,YAAY,KAAK,MAC/B,KAAK,QAAQ,gCAGT,SAAC,GACL,KAAK,SAAW,MAlCd,IAsCN,QAAO,QAAU;;;;6XCzCb,MAAQ,QAAQ,YAChB,QAAU,QAAQ,aAEhB,eAAc,WACP,QADP,qCAAA,GAEF,KAAK,UAAY,MAAM,QACrB,mLAOF,KAAK,SAAW,GAAI,SACpB,KAAK,UAAU,YAAY,KAAK,SAAS,WACzC,KAAK,SAAW,KAGZ,cAAgB,YAClB,KAAK,UAAU,iBAAiB,QAAS,SAAA,GACvC,EAAM,iBACN,UAAU,WAAW,EAAK,SAAS,KAAM,EAAK,UAAU,gCAlB1D,4BAuBO,SAAC,EAAU,GACpB,KAAK,UAAU,SAAW,EAC1B,KAAK,UAAU,KAAO,EAAQ,IAG9B,KAAK,SAAW,yBAGX,WACL,KAAK,SAAS,KAAK,yBAGjB,WACF,KAAK,SAAS,WApCZ,IAwCN,QAAO,QAAU;;;;s/BC3Cb,MAAQ,QAAQ,YAEd,SAAQ,SAAA,GACD,QADP,qCAAA,GAEF,KAAA,OAAA,eAFE,EAAQ,WAAA,cAAA,MAAA,KAAA,MAGV,KAAK,UAAY,MAAM,QACrB,4CAIF,KAAK,cAAgB,EACrB,KAAK,uBAAyB,KAE9B,MAAM,SAAS,KAAK,SAAA,GAClB,SAAS,iBAAiB,WAAY,SAAA,SAAS,GAAM,mBACrD,SAAS,iBAAiB,YAAa,SAAA,SAAS,GAAK,aAAa,KAClE,SAAS,iBAAiB,YAAa,SAAA,SAAS,GAAK,aAAa,KAClE,SAAS,iBAAiB,OAAQ,SAAA,SAAS,GAAK,QAAQ,wBAfxD,EAAQ,gBAAR,6BAmBQ,SAAC,GAGP,KAAK,wBAA0B,EAAM,SACzC,KAAK,uBAAyB,EAAM,OAE/B,KAAK,iBACR,MAAM,kBAAkB,KAAK,wCAIrB,SAAC,GACX,KAAK,uBAAyB,OAEvB,KAAK,eACV,MAAM,oBAAoB,KAAK,kCAItB,SAAC,MAIR,yFAHJ,GAAM,iBAEN,MAAM,oBAAoB,KAAK,WAC3B,EAAO,EAAM,aAAa,MAAM,QAEpC,uCACc,MAAM,eAAe,4BACvB,EAAK,WADf,KAAI,EAAA,GACJ,SAAQ,EAAA,SAFL,KAAI,KAAA,EAAA,GAAC,cAAa,EAAA,uDA5CrB,GAAkB,QAAQ,UAAU,aAmD1C,QAAO,QAAU;;;;ACrDjB,s/BAEI,MAAQ,QAAQ,YAChB,QAAU,QAAQ,aAEhB,SAAQ,SAAA,GACD,QADP,qCAAA,GAEF,KAAA,OAAA,eAFE,EAAQ,WAAA,cAAA,MAAA,KAAA,MAIV,KAAK,WAAY,EACjB,KAAK,SAAW,GAAI,SAEpB,MAAM,SAAS,KAAK,SAAA,GAClB,EAAK,UAAY,SAAS,cAAc,cACxC,EAAK,iBAAmB,SAAS,cAAc,sBAC/C,EAAK,YAAc,SAAS,cAAc,gBAC1C,EAAK,aAAe,SAAS,cAAc,cAC3C,EAAK,eAAiB,SAAS,cAAc,gBAC7C,EAAK,YAAc,SAAS,cAAc,eAC1C,EAAK,SAAW,EAAK,UAAU,cAAc,YAC7C,EAAK,MAAQ,EAAK,UAAU,cAAc,SAE1C,SAAS,cAAc,aACpB,iBAAiB,QAAS,SAAA,SAAK,GAAK,mBAAmB,KAE1D,EAAK,SAAS,iBAAiB,QAAS,SAAA,SAAK,GAAK,gBAAgB,KAElE,EAAK,eAAe,iBAAiB,QAAS,SAAA,SAAK,GAAK,mBAAmB,KAC3E,EAAK,aAAa,iBAAiB,QAAS,SAAA,SAAK,GAAK,iBAAiB,KACvE,EAAK,iBAAiB,iBAAiB,SAAU,SAAA,SAAK,GAAK,mBAAmB,KAC9E,EAAK,YAAY,iBAAiB,QAAS,SAAA,SAAK,GAAK,mBAAmB,wBAzBxE,EAAQ,gBAAR,qBA6BA,WACF,KAAK,UAAU,UAAU,OAAO,UAChC,MAAM,oBAAoB,KAAK,SAAU,UACzC,MAAM,oBAAoB,KAAK,MAAO,8BAGpC,WACG,KAAK,YAGV,KAAK,cACL,KAAK,UAAU,UAAU,IAAI,UAC7B,MAAM,kBAAkB,KAAK,SAAU,UACvC,MAAM,kBAAkB,KAAK,MAAO,sCAG3B,WACT,KAAK,SAAS,sCAGD,SAAC,GACd,EAAM,iBACN,KAAK,yCAGW,SAAC,GACjB,EAAM,iBACN,KAAK,yCAGW,SAAC,GACjB,GAAI,GAAM,KAAK,YAAY,MAAM,MAE7B,GAAI,QAAQ,YAAa,IAC3B,KAAK,YAAY,MAAQ,GACzB,KAAK,YAAY,OAEjB,KAAK,YAAY,YAAY,KAAK,SAAS,WAC3C,KAAK,SAAS,OAEd,KAAK,KAAK,eACR,KAAM,EACN,SAAU,iDAKE,SAAC,GACjB,EAAM,iBACN,EAAM,OAAO,OACb,KAAK,iBAAiB,0CAGA,SAAC,MACnB,sFAAA,EAAO,KAAK,iBAAiB,MAAM,GAE9B,uDAIT,MAAK,eAAe,YAAY,KAAK,SAAS,WAC9C,KAAK,SAAS,YAEd,uCACc,MAAM,eAAe,4BACvB,EAAK,WADf,KAAI,EAAA,GACJ,SAAQ,EAAA,SAFL,KAAI,KAAA,EAAA,GAAC,cAAa,EAAA,mFAMH,SAAC,MAef,yFAdN,GAAM,iBACN,EAAM,OAAO,OACb,KAAK,aAAa,YAAY,KAAK,SAAS,WAC5C,KAAK,SAAS,qBAGZ,uCACc,MAAM,IAAI,oDAAtB,KAAI,EAAA,GACJ,SAAU,gBAFP,KAAI,KAAA,EAAA,GAAC,cAAa,EAAA,sDAMvB,KAAK,cAKH,EADE,iBAAmB,YAAa,UAAU,cAAc,WACtD,MAAM,8BAGN,MAAM,2BAGZ,KAAK,KAAK,SACR,MAAO,gEA3HT,GAAkB,QAAQ,UAAU,aAiI1C,QAAO,QAAU;;;;6XCtIb,MAAQ,QAAQ,YAEd,OAAM,WACC,QADP,0BAAA,GAEF,KAAK,YAAa,6BADL,EAAQ,MAAA,GAAA,EAAA,EAAA,EAAA,EAAA,IAAR,EAAQ,GAAA,UAAA,EAErB,MAAK,YAAc,sBAHjB,yBAMI,WACN,IAAI,KAAK,WAGT,MAFA,MAAK,YAAa,EAEX,QAAQ,IACb,KAAK,YAAY,IAAI,SAAA,SAAM,OAAM,kBAAkB,UAXnD,IAgBN,QAAO,QAAU;;;;6XClBb,MAAQ,QAAQ,YAEd,eAAc,WACP,QADP,GACQ,mCADR,GAEF,KAAK,UAAY,MAAM,QAAO,gRAY9B,KAAK,MAAQ,EACb,KAAK,QAAU,KAAK,UAAU,cAAc,WAC5C,KAAK,SAAW,KAAK,UAAU,cAAc,aAC7C,KAAK,KAAO,KAAK,UAAU,cAAc,QAEzC,EAAQ,WAAW,aAAa,KAAK,UAAW,GAChD,KAAK,UAAU,aAAa,EAAS,KAAK,UAAU,WAIpD,IAAI,GAAmB,MAAM,KAAO,SAAW,OAE/C,GAAQ,iBAAiB,EAAkB,SAAA,SAAK,GAAK,eAAe,KACpE,KAAK,MAAM,iBAAiB,YAAa,SAAA,SAAK,GAAK,kBAAkB,KACrE,KAAK,MAAM,iBAAiB,aAAc,SAAA,SAAK,GAAK,mBAAmB,KACvE,KAAK,MAAM,iBAAiB,WAAY,SAAA,SAAK,GAAK,iBAAiB,KAEnE,KAAK,mCA/BH,mCAkCc,SAAC,GACjB,KAAK,MAAM,wCAGG,SAAC,GACf,KAAK,MAAM,wCAGI,SAAC,aAChB,MAAK,MAAM,UAAU,IAAI,SAEzB,IAAI,GAAa,QAAb,GAAa,GAEf,sBAAsB,SAAA,GACpB,EAAK,MAAM,SAEb,EAAK,MAAM,UAAU,OAAO,UAC5B,SAAS,oBAAoB,UAAW,GAE1C,UAAS,iBAAiB,UAAW,iCAGzB,SAAC,aACb,uBAAsB,SAAA,SAAK,GAAK,6CAGtB,iBACgB,KAAK,MAAzB,EAAG,EAAH,IAAK,EAAG,EAAH,IAAK,EAAK,EAAL,MACZ,GAAW,OAAO,GAAS,IAAQ,EAAM,EAC7C,MAAK,SAAS,MAAM,MAClB,KAAK,QAAQ,MAAM,KAAiB,IAAV,EAAgB,IAE5C,KAAK,KAAK,YAAc,MAlEtB,IAsEN,QAAO,QAAU;;;;6XCxEb,MAAQ,QAAQ,YAEd,OAAM,WACC,QADP,0BAAA,GAEF,KAAK,UAAY,MAAM,QACrB,uCAGF,KAAK,QACH,MAAO,IAAK,QAAQ,iBACpB,KAAM,IAAK,QAAQ,mBAGrB,KAAK,SAAW,KAChB,KAAK,aAAe,QAAQ,UAC5B,KAAK,IAAI,SAAU,WAAW,wBAb5B,uBAgBE,SAAC,GAEL,MADA,MAAK,SAAW,EACT,KAAK,OAAO,KAAK,aAAa,OAAO,wBAGzC,WACH,KAAK,OAAO,KAAK,aAAa,2BAG7B,SAAC,8DAEA,UAAA,OADF,UAAA,EAAS,SAAA,GAAQ,CAEjB,OAAO,MAAK,aAAe,KAAK,aAAa,KAAK,SAAM,MAClD,GACA,EAiBE,qFAfF,KAAK,cACP,EAAW,KAAK,OAAO,KAAK,aAAa,WAG3C,KAAK,YAAc,EACnB,EAAQ,KAAK,OAAO,KAAK,aAAa,UACtC,KAAK,UAAU,YAAY,IAEvB,KAAK,SAAQ,yDAAQ,KAAK,OAAO,KAAK,sBAEtC,EAAS,iBACX,EAAM,UAAU,IAAI,UAChB,GAAU,EAAS,UAAU,OAAO,wCAGpC,IACF,MAAM,kBAAkB,IAGtB,GAAU,EAAY,KAAK,MAAM,oBAAoB,uCAEnD,QAAQ,IAAI,YAGhB,GACF,KAAK,UAAU,YAAY,qDAzD7B,IA+DN,QAAO,QAAU;;;;yHC/DjB,QAAS,OAAM,GACb,OACE,EAAG,EAAI,MACP,EAAG,EAAI,OAIX,QAAS,eAAc,EAAQ,GAC7B,GAAI,GAAK,KAAK,IAAI,EAAO,EAAI,EAAO,GAChC,EAAK,KAAK,IAAI,EAAO,EAAI,EAAO,EACpC,OAAO,MAAK,KAAK,EAAG,EAAK,EAAG,GAG9B,QAAS,aAAY,EAAQ,GAC3B,OACE,GAAI,EAAO,EAAI,EAAO,GAAK,EAC3B,GAAI,EAAO,EAAI,EAAO,GAAK,GAI/B,QAAS,WAAU,GACjB,MAAI,GAAM,QACD,MAAM,UAAU,IAAI,KAAK,EAAM,QAAS,QAGvC,MAAM,wQA3Bd,MAAQ,QAAQ,YA+Bd,QAAO,WACA,QADP,GACQ,8DAGR,UAAA,OAFF,UAAA,EAAS,SAAA,EAAG,EAAM,MAClB,kBAAA,EAAiB,SAAA,EAAG,SAAS,GAAK,OAAO,GAAO,uBAH9C,GAKF,KAAK,QAAU,EACf,KAAK,mBAAqB,EAC1B,KAAK,IAAM,EACX,KAAK,IAAM,EACX,KAAK,OAAS,EACd,KAAK,QAAU,EACf,KAAK,gBAIH,iBACA,iBACA,gBACA,QAAQ,SAAA,GACR,EAAK,GAAY,EAAK,GAAU,KAAI,KAItC,EAAU,iBAAiB,YAAa,KAAK,gBAC7C,EAAU,iBAAiB,aAAc,KAAK,gBAG9C,EAAU,iBAAiB,QAAS,SAAA,SAAK,GAAK,SAAS,yBA3BrD,sBA8BC,WACH,KAAK,IAAM,EACX,KAAK,IAAM,EACX,KAAK,OAAS,EACd,KAAK,kCAGC,SAAC,GACP,GAAK,KAAK,mBAAmB,EAAM,QAAnC,CACA,EAAM,gBAEN,IAAI,GAAe,KAAK,QAAQ,wBAC5B,EAAQ,EAAM,MAEM,KAApB,EAAM,YAER,GAAS,IAIX,EAAQ,KAAK,IAAI,KAAK,IAAI,EAAO,KAAK,GAEtC,IAAI,GAAY,EAAS,IAAO,CAG5B,MAAK,OAAS,EAAY,MAE9B,KAAK,QAAU,EACf,KAAK,MAAQ,EAAM,MAAQ,EAAa,OAAS,EAAY,GAC7D,KAAK,MAAQ,EAAM,MAAQ,EAAa,MAAQ,EAAY,GAC5D,KAAK,+CAGY,SAAC,GAClB,SAAS,iBAAiB,YAAa,KAAK,gBAC5C,SAAS,iBAAiB,UAAW,KAAK,cAC1C,SAAS,iBAAiB,YAAa,KAAK,gBAC5C,SAAS,iBAAiB,WAAY,KAAK,4CAG/B,SAAC,GACK,aAAd,EAAM,MAAsC,GAAf,EAAM,OAClC,KAAK,mBAAmB,EAAM,UACnC,EAAM,iBAEN,KAAK,YAAc,UAAU,GAC7B,KAAK,UAEgB,IAAjB,KAAK,SACP,KAAK,oBAAoB,kCAIf,SAAC,GACb,EAAM,gBACN,IAAI,GAAS,UAAU,GACnB,EAAe,EAAO,OAAO,aAC7B,EAAmB,KAAK,YAAY,OAAO,aAC3C,EAAe,KAAK,QAAQ,uBAKhC,IAHA,KAAK,KAAO,EAAa,EAAI,EAAiB,EAC9C,KAAK,KAAO,EAAa,EAAI,EAAiB,EAE1C,EAAO,GAAI,CACb,GAAI,GAAY,cAAc,EAAO,GAAI,EAAO,IAAM,cAAc,KAAK,YAAY,GAAI,KAAK,YAAY,GAC1G,MAAK,QAAU,EACf,KAAK,MAAQ,EAAa,EAAI,EAAa,OAAS,EAAY,GAChE,KAAK,MAAQ,EAAa,EAAI,EAAa,MAAQ,EAAY,GAGjE,KAAK,UACL,KAAK,YAAc,yBAGd,WACL,KAAK,QAAQ,MAAM,gBAAkB,KAAK,QAAQ,MAAM,UACpD,eAAiB,KAAK,IAAM,OAAS,KAAK,IAAM,gBAAkB,KAAK,OAAS,gCAG1E,SAAC,GAKX,MAJA,GAAM,iBACN,KAAK,UACL,KAAK,YAAY,MAEb,KAAK,aACP,KAAK,YAAc,UAAU,KAI/B,SAAS,oBAAoB,YAAa,KAAK,gBAC/C,SAAS,oBAAoB,UAAW,KAAK,cAC7C,SAAS,oBAAoB,YAAa,KAAK,oBAC/C,UAAS,oBAAoB,WAAY,KAAK,mBA1H5C,IA8HN,QAAO,QAAU;;;;6XC7Jb,MAAQ,QAAQ,YAEd,UAAS,WACF,QADP,qCAAA,GAEF,MAAM,SAAS,KAAK,SAAA,GAClB,EAAK,UAAY,SAAS,cAAc,cACxC,EAAK,UAAY,EAAK,UAAU,UAAU,SAAS,UACnD,EAAK,6BALL,qBASM,oIACF,MAAM,oBAAoB,KAAK,UAAW,kBAChD,KAAK,UAAU,MAAM,QAAU,yDAX7B,IAeN,QAAO,QAAU;;;;6XCjBb,MAAQ,QAAQ,YAEd,iBAAgB,WACT,QADP,GACQ,mCADR,GAEF,KAAK,SAAW,EAEhB,MAAM,SAAS,KAAK,SAAA,GAClB,EAAK,iBAAmB,SAAS,cAAc,6BAC/C,EAAK,WAAa,SAAS,cAAc,sBACzC,EAAK,OAAS,WAAW,sBAEzB,EAAK,OAAO,YAAY,SAAA,SAAK,GAAK,qBAClC,EAAK,yCAVL,iCAcY,WACV,KAAK,OAAO,QACd,KAAK,WAAW,YAAY,KAAK,SAAS,WAG1C,KAAK,iBAAiB,YAAY,KAAK,SAAS,eAnBhD,IAwBN,QAAO,QAAU;;;;yHCxBjB,QAAS,OAAM,EAAK,GAClB,GAAI,GAAO,KAAK,IAAI,GAAI,EACxB,OAAO,MAAK,MAAM,KAAK,MAAM,EAAM,IAAS,EAG9C,QAAS,WAAU,GACjB,MAAI,GAAQ,KACH,EAAQ,SAGR,MAAM,EAAQ,KAAM,GAAK,wQAZhC,MAAQ,QAAQ,YAgBd,QAAO,WACA,QADP,0BAAA,GAEF,KAAK,UAAY,MAAM,QACrB,mFAKF,KAAK,QAAU,KAAK,UAAU,cAAc,SAC5C,KAAK,QAAU,KAAK,UAAU,cAAc,6BAT1C,uBAYE,SAAC,MAAC,GAAD,EAAC,KAAM,EAAP,EAAO,cAIZ,OAHA,MAAK,QAAQ,YAAc,UAAU,GAGhC,OAII,GAAQ,EACf,KAAK,QAAQ,YAAc,eAEpB,EAAO,EACd,KAAK,QAAQ,YAAc,MAAQ,MAAM,EAAO,EAAiB,IAAM,IAAK,GAAK,aAGjF,KAAK,QAAQ,YAAc,MAAQ,MAAM,IAAM,EAAO,EAAiB,IAAK,GAAK,iBAVjF,KAAK,QAAQ,YAAc,QAjB3B,IAgCN,QAAO,QAAU;;;;6XChDb,MAAQ,QAAQ,YAEd,OAAM,WACC,QADP,0BAAA,GAEF,KAAK,UAAY,MAAM,QAAQ,kDAF7B,wBAKG,WACL,KAAK,UAAU,UAAU,OAAO,WAChC,KAAK,UAAU,WACf,KAAK,UAAU,UAAU,IAAI,eAR3B,IAYN,QAAO,QAAU;;;;ACdjB,s/BAEI,MAAQ,QAAQ,YAChB,OAAS,QAAQ,qBAEf,SAAQ,SAAA,GACD,QADP,qCAAA,GAEF,KAAA,OAAA,eAFE,EAAQ,WAAA,cAAA,MAAA,KAAA,MAIV,KAAK,iBAAmB,KAExB,MAAM,SAAS,KAAK,SAAA,GAClB,EAAK,cAAgB,MAAM,QACzB,SAAS,iBAAiB,6BAE5B,EAAK,cAAgB,MAAM,QACzB,SAAS,iBAAiB,4BAG5B,MAAM,QACJ,SAAS,iBAAiB,gCAC1B,QAAQ,SAAA,SAAM,IAAI,QAAO,KAE3B,EAAK,UAAY,SAAS,cAAc,aACxC,EAAK,UAAY,SAAS,cAAc,sBAExC,EAAK,UAAU,iBAAiB,SAAU,SAAA,SAAK,GAAK,UAAU,KAC9D,EAAK,UAAU,iBAAiB,QAAS,SAAA,SAAK,GAAK,UAAU,KAC7D,EAAK,UAAU,iBAAiB,QAAS,SAAA,SAAK,GAAK,cAAc,KAKjE,EAAK,UAAU,iBAAiB,YAAa,SAAA,GACvC,MAAM,QAAQ,EAAE,OAAQ,sBAC5B,EAAE,sCA9BJ,EAAQ,gBAAR,8BAmCS,SAAC,GAGP,EAAM,YACT,EAAM,iBACN,EAAM,cAAc,WAAa,EAAM,iCAIlC,SAAC,eAEH,MAAM,MAAsB,UAAd,EAAM,MAAyC,SAArB,EAAM,OAAO,QAM1D,aAAa,KAAK,kBAGO,SAArB,EAAM,OAAO,KACf,KAAK,iBAAmB,WAAW,SAAA,SAAK,GAAK,KAAK,WAAW,KAG7D,KAAK,KAAK,sCAKH,WAET,GAAI,MAEA,GACF,WA4BF,OAzBA,MAAK,cAAc,QAAQ,SAAS,GACd,QAAhB,EAAQ,MAAkC,YAAhB,EAAQ,OAChB,YAAhB,EAAQ,KACV,EAAY,KAAK,OAAO,EAAQ,UAGhC,EAAY,KAAK,IAAM,EAAQ,MAAQ,MAIvB,YAAhB,EAAQ,KACV,EAAO,EAAQ,MAAQ,EAAQ,QAG/B,EAAO,EAAQ,MAAQ,EAAQ,QAInC,KAAK,cAAc,QAAQ,SAAS,GAClC,EAAY,KAAK,OAAO,EAAQ,UAChC,EAAO,QAAQ,EAAQ,MAAQ,EAAQ,UAGzC,EAAO,YAAc,EAAY,OAE1B,MAjGL,GAAkB,QAAQ,UAAU,aAqG1C,QAAO,QAAU;;;;6XC1Gb,MAAQ,QAAQ,YAEd,QAAO,WACA,QADP,qCAAA,GAEF,KAAK,UAAY,MAAM,QACrB,+RAiBF,KAAK,aAAe,KACpB,KAAK,UAAU,MAAM,QAAU,MAE/B,IAAI,GAAkB,SAAA,GAChB,EAAM,QAAU,EAAK,YACvB,EAAK,UAAU,MAAM,QAAU,QAInC,MAAK,UAAU,iBAAiB,qBAAsB,GACtD,KAAK,UAAU,iBAAiB,eAAgB,uBA9B9C,qBAiCA,sBAAC,EAAK,UAAA,QAAA,GAAA,SAAA,UAAA,GAAG,IAAG,UAAA,EACd,cAAa,KAAK,cAClB,KAAK,UAAU,MAAM,QAAU,OAC/B,KAAK,UAAU,UAAU,OAAO,YAChC,KAAK,aAAe,WAAW,SAAA,GAC7B,EAAK,UAAU,MAAM,QAAU,IAC9B,uBAGD,WACF,aAAa,KAAK,cAClB,KAAK,UAAU,UAAU,IAAI,gBA5C3B,IAgDN,QAAO,QAAU;;;;6XClDb,MAAQ,QAAQ,YAChB,QAAU,QAAQ,cAEhB,UAAS,WACF,QADP,qCAAA,EAIF,IAAI,GAAY,MAAM,KACpB,0BACA,6DAEF,MAAK,UAAY,MAAM,QACrB,sDAEI,EACF,mDAQJ,KAAK,UAAY,KAAK,UAAU,cAAc,cAC9C,KAAK,UAAU,UAAY,KAE3B,KAAK,cAAgB,KAAK,UAAU,cAAc,kBAElD,MAAM,SAAS,KAAK,SAAA,GAClB,EAAK,SAAW,GAAI,SAAQ,EAAK,eAC/B,UAAW,EAAK,kCA3BlB,uBAgCE,SAAC,GAIL,GAAI,GAAW,KAAK,kBAIpB,OAHA,MAAK,UAAU,IAAM,oCAAsC,mBAAmB,EAAQ,MACtF,KAAK,UAAU,MAAQ,EAAQ,MAC/B,KAAK,UAAU,OAAS,EAAQ,OACzB,uBAGJ,WACH,KAAK,UAAU,IAAM,cACrB,KAAK,SAAS,wCAGA,qBACd,OAAO,IAAI,SAAQ,SAAA,GACjB,GAAI,GAAS,QAAT,GAAS,GACX,EAAK,UAAU,oBAAoB,OAAQ,GAC3C,IAEF,GAAK,UAAU,iBAAiB,OAAQ,SAtDxC,IA2DN,QAAO,QAAU;;;;6XC9Db,MAAQ,QAAQ,YAEd,MAAK,WACE,QADP,GACQ,EAAS,EAAU,mCAD3B,GAEF,KAAK,UAAY,MAAM,QACrB,8DAGF,KAAK,SAAW,KAAK,UAAU,cAAc,kBAC7C,KAAK,SAAS,YAAc,EAC5B,KAAK,eACL,KAAK,aAEL,KAAK,OAAS,GAAI,SAAQ,SAAA,SAAK,GAAK,eAAiB,IAErD,EAAQ,QAAQ,SAAA,GACd,GAAI,GAAW,SAAS,cAAc,SACtC,GAAS,UAAY,WACrB,EAAS,YAAc,EACvB,EAAS,iBAAiB,QAAS,SAAA,GACjC,EAAK,eAAe,KAEtB,EAAK,UAAU,YAAY,KAGzB,IACF,KAAK,aAAe,WAAW,SAAA,SAAK,GAAK,QAAQ,wBAxBjD,qBA4BA,WAGF,MAFA,cAAa,KAAK,cAClB,KAAK,iBACE,MAAM,kBAAkB,KAAK,UAAW,YA/B7C,KAmCA,OAAM,WACC,QADP,0BAAA,GAEF,KAAK,UAAY,MAAM,QAAQ,kDAF7B,qBAKA,SAAC,8DAGD,UAAA,OAFF,SAAA,EAAQ,SAAA,EAAG,EAAC,MACZ,QAAA,EAAO,SAAA,GAAI,WAAU,EAEjB,EAAQ,GAAI,OAAM,EAAS,EAAU,EAOzC,OANA,MAAK,UAAU,YAAY,EAAM,WAEjC,EAAM,OAAO,KAAK,SAAA,SAAK,GAAM,SAAQ,KAAK,SAAA,GACxC,EAAK,UAAU,YAAY,EAAM,aAG5B,MAhBL,IAoBN,QAAO,QAAU;;;;s/BCzDb,MAAQ,QAAQ,YAEd,YAAW,SAAA,GACJ,QADP,qCAAA,GAEF,KAAA,OAAA,eAFE,EAAW,WAAA,cAAA,MAAA,KAAA,MAGb,KAAK,UAAY,KAEjB,MAAM,SAAS,KAAK,SAAA,GAClB,EAAK,UAAY,SAAS,cAAc,iBAGxC,EAAK,UAAU,OAAO,GAAG,SAAU,EAEnC,EAAK,UAAU,iBAAiB,SAAU,SAAA,SAAK,GAAK,UAAU,wBAX9D,EAAW,gBAAX,0BAeK,SAAC,GACR,GAAI,GAAQ,KAAK,UAAU,OAAO,KAE7B,KACH,EAAQ,MAAM,QAAQ,KAAK,UAAU,QAAQ,OAAO,SAAC,EAAO,GAC1D,MAAO,KAAU,EAAM,QAAU,EAAM,MAAQ,KAC9C,KAGL,KAAK,KAAK,UACR,MAAO,QAzBP,GAAqB,QAAQ,UAAU,aA8B7C,QAAO,QAAU;;;;AChCjB,YAmFA,SAAS,2EAA4C,UAAA,OAAvB,YAAA,EAAW,SAAA,GAAQ,CAC/C,OAAO,UAAS,MAAI,GAAS,UAAA,QAAA,GAAA,SAAA,UAAA,GAAG,SAAQ,UAAA,GAAE,EAAe,UAAA,QAAA,GAAA,SAAA,UAAA,GAAG,aAAY,UAAA,EACtE,IAAI,GACF,IAAK,EAAG,UAAU,SAAS,GAAY,MAAO,SAAQ,cAGtD,IAAI,EAAG,UAAU,SAAS,GAAY,MAAO,SAAQ,SAGvD,OAAO,IAAI,SAAQ,SAAA,GACjB,GAAI,GAAW,QAAX,GAAW,GACT,EAAM,QAAU,IACpB,EAAG,oBAAoB,sBAAuB,GAC9C,EAAG,oBAAoB,gBAAiB,GACxC,EAAG,UAAU,OAAO,GACpB,KAGF,GAAG,UAAU,IAAI,GAEjB,sBAAsB,SAAA,GACpB,EAAG,iBAAiB,sBAAuB,GAC3C,EAAG,iBAAiB,gBAAiB,GACrC,EAAG,UAAU,EAAc,SAAW,OAAO,QAxGrD,QAAQ,QAAU,SAAiB,GACjC,MAAO,OAAM,UAAU,MAAM,MAAM,IAGrC,QAAQ,SAAW,GAAI,SAAQ,SAAS,GACtC,QAAS,KACoB,WAAvB,SAAS,YACX,IAGJ,SAAS,iBAAiB,mBAAoB,GAC9C,MAGF,QAAQ,IAAM,SAAa,GACzB,MAAO,IAAI,SAAQ,SAAS,EAAS,GACnC,GAAI,GAAM,GAAI,eACd,GAAI,KAAK,MAAO,GAEhB,EAAI,OAAS,WACO,KAAd,EAAI,OACN,EAAQ,EAAI,UAGZ,EAAO,MAAM,EAAI,cAGrB,EAAI,QAAU,WACZ,EAAO,MAAM,mBAGf,EAAI,UAIR,QAAQ,QAAW,WACjB,GAAI,GAAQ,SAAS,cAAc,MACnC,OAAO,UAAU,GACf,GAAI,EAGJ,KAFA,EAAM,UAAY,EAClB,EAAI,EAAM,SAAS,GACZ,EAAM,YACX,EAAM,YAAY,EAAM,WAE1B,OAAO,MAIX,IAAI,YACF,IAAK,QACL,IAAK,OACL,IAAK,OACL,IAAK,SACL,IAAK,QACL,IAAK,SAGP,SAAQ,WAAa,SAAoB,GACvC,MAAO,QAAO,GAAQ,QAAQ,aAAc,SAAU,GACpD,MAAO,WAAU,MAIrB,QAAQ,cAAgB,SAAS,8BAAY,EAAM,MAAA,EAAA,EAAA,EAAA,EAAA,GAAA,EAAA,EAAA,EAAA,EAAA,IAAN,EAAM,EAAA,GAAA,UAAA,EAEjD,OADA,GAAS,EAAO,IAAI,QAAQ,YACrB,EAAQ,OAAO,SAAC,EAAK,EAAK,SAAM,IAAO,GAAO,EAAO,IAAM,KAAK,KAGzE,QAAQ,eAAiB,SAAwB,GAC/C,MAAO,IAAI,SAAQ,SAAS,EAAS,GACnC,GAAI,GAAS,GAAI,WACjB,GAAO,WAAW,GAClB,EAAO,QAAU,WACf,EAAO,EAAO,QAEhB,EAAO,OAAS,WACd,EAAQ,EAAO,YAkCrB,QAAQ,kBAAoB,sBAC5B,QAAQ,oBAAsB,qBAAqB,aAAa,IAEhE,QAAQ,QAAU,SAAS,EAAI,GAC7B,GAAI,EAAG,QACL,MAAO,GAAG,QAAQ,EAGpB,IAAI,GAAU,EAAG,SAAW,EAAG,iBAE/B,GACE,IAAmB,GAAf,EAAG,UACH,EAAQ,KAAK,EAAI,GAAW,MAAO,SAChC,EAAK,EAAG,aAMnB,QAAQ,KAAQ,UAAU,UAAU,QAAQ,eAAgB,EAE5D,QAAQ,QAAU,SAAS,GACzB,MAAO,IAAI,SAAQ,SAAC,EAAS,GAC3B,GAAI,GAAO,SAAS,cAAc,OAClC,GAAK,IAAM,aACX,EAAK,KAAO,EAEZ,EAAK,iBAAiB,OAAQ,SAAA,SAAK,OACnC,EAAK,iBAAiB,QAAS,SAAA,SAAK,OAEpC,SAAS,KAAK,YAAY,MAI9B,QAAQ,iBAAmB,WACzB,GAAI,GAAc,OAElB,UAAS,KAAK,iBAAiB,QAAS,SAAA,GACtC,EAAM,OAAO,UAAU,IAAmB,OAAf,EAAuB,cAAgB,mBACjE,GAEH,SAAS,KAAK,iBAAiB,OAAQ,SAAA,GACrC,EAAM,OAAO,UAAU,OAAO,eAC9B,EAAM,OAAO,UAAU,OAAO,mBAC7B,GAEH,SAAS,KAAK,iBAAiB,UAAW,SAAA,GACxC,EAAc,QACb,GAEH,SAAS,KAAK,iBAAiB,YAAa,SAAA,GAC1C,EAAc,UACb;;;;ACpKL,6XAEM,gBAAe,WACR,QADP,GACQ,mCADR,GAEF,KAAK,WAAa,EAClB,KAAK,QAAU,GAAI,QAAO,GAG1B,KAAK,YAEL,KAAK,QAAQ,UAAY,SAAA,SAAS,GAAK,WAAW,wBARhD,2BAWM,SAAC,GACT,IAAK,EAAM,KAAK,GAEd,WADA,SAAQ,IAAI,qBAAsB,EAIpC,IAAI,GAAW,KAAK,SAAS,EAAM,KAAK,GAExC,OAAK,UAKE,MAAK,SAAS,EAAM,KAAK,IAE5B,EAAM,KAAK,UACb,GAAS,GAAG,GAAI,OAAM,EAAM,KAAK,YAInC,GAAS,GAAG,EAAM,KAAK,aAXrB,SAAQ,IAAI,kBAAmB,mCAcnB,SAAC,GACf,GAAI,GAAkB,KAClB,IAAc,KAAK,UAGvB,OAFA,GAAQ,GAAK,EAEN,GAAI,SAAQ,SAAS,EAAS,GACnC,EAAgB,SAAS,IAAc,EAAS,GAChD,EAAgB,QAAQ,YAAY,SAzCpC,IA8CN,QAAO,QAAU;;;;AChDjB,yHAEA,QAAS,kBAAiB,GACxB,MAAO,IAAI,SAAQ,SAAS,EAAS,GACnC,QAAS,GAAU,GACjB,EAAQ,EAAI,QACZ,IAEF,QAAS,GAAQ,GACf,EAAO,EAAI,OACX,IAEF,QAAS,KACP,EAAI,oBAAoB,WAAY,GACpC,EAAI,oBAAoB,UAAW,GACnC,EAAI,oBAAoB,QAAS,GACjC,EAAI,oBAAoB,QAAS,GAEnC,EAAI,iBAAiB,WAAY,GACjC,EAAI,iBAAiB,UAAW,GAChC,EAAI,iBAAiB,QAAS,GAC9B,EAAI,iBAAiB,QAAS,yQAI5B,iBAAgB,WACT,QADP,GACQ,EAAM,EAAS,wBADvB,EAEF,IAAI,GAAU,UAAU,KAAK,EAAM,EACnC,MAAK,MAAQ,iBAAiB,GAC9B,EAAQ,gBAAkB,SAAS,GACjC,EAAgB,EAAQ,OAAQ,EAAM,iCALtC,4BASO,SAAC,EAAQ,EAAgB,GAClC,MAAO,MAAK,MAAM,KAAK,SAAS,GAC9B,GAAI,GAAO,UAEP,GAAe,MACjB,EAAW,EAEJ,IACP,EAAO,EAGT,IAGI,GAHA,EAAK,EAAG,YAAY,EAAQ,GAC5B,EAAM,EAAS,EAAI,GACnB,EAAU,iBAAiB,EAG/B,OAAK,IAKH,EADE,EAAI,IAAM,UAAY,GAAI,GACd,QAAQ,IAAI,EAAI,IAAI,mBAGpB,iBAAiB,GAG1B,EAAQ,KAAK,WAClB,MAAO,MAXA,uBAgBV,SAAC,EAAO,GACT,MAAO,MAAK,YAAY,EAAO,SAAS,GACtC,MAAO,GAAG,YAAY,GAAO,IAAI,wBAIlC,SAAC,EAAO,EAAK,GACd,MAAO,MAAK,YAAY,EAAO,YAAa,SAAS,GACnD,EAAG,YAAY,GAAO,IAAI,EAAO,2BAI/B,SAAC,EAAO,GACZ,MAAO,MAAK,YAAY,EAAO,YAAa,SAAS,GACnD,EAAG,YAAY,GAAM,OAAQ,SAxD7B,IA6DN,QAAO,QAAU;;;;YClFjB,SAAS,UAMP,MALK,OACH,IAAM,GAAI,KAAI,cAAe,EAAG,SAAS,GACvC,EAAG,kBAAkB,aAGlB,IAVT,GAAI,KAAM,QAAQ,qBACd,GAYA,MAAK,UACP,OAAO,SACL,IAAK,SAAA,SAAO,UAAS,IAAI,SAAU,IACnC,IAAK,SAAC,EAAK,SAAQ,UAAS,IAAI,SAAU,EAAK,IAC/C,OAAQ,SAAA,SAAO,UAAQ,OAAQ,SAAU,KAI3C,OAAO,SACL,IAAK,SAAA,SAAO,SAAQ,QAAQ,aAAa,QAAQ,KACjD,IAAK,SAAC,EAAK,SAAQ,SAAQ,QAAQ,aAAa,QAAQ,EAAK,KAC7D,OAAQ,SAAA,SAAO,SAAQ,QAAQ,aAAa,WAAW","file":"page.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\nvar loadScripts = require(\"./load-scripts\");\nvar polyfillsNeeded = [];\n\nif (!window.Promise) { // IE :(\n  polyfillsNeeded.push('js/promise-polyfill.js');\n}\n\n// I'm sure user-agent sniffing will be fiiiiine\nif (/(iPhone|iPad);/.test(navigator.userAgent)) {\n  polyfillsNeeded.push('js/fastclick.js');\n}\n\nloadScripts(polyfillsNeeded, function() {\n  require('regenerator-runtime/runtime');\n  require('./utils').trackFocusMethod();\n  new (require('./main-controller'));\n}, function() {\n  console.error(\"Failed to load polyfills\");\n});\n","function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(e){return\"function\"==typeof e}function isNumber(e){return\"number\"==typeof e}function isObject(e){return\"object\"==typeof e&&null!==e}function isUndefined(e){return void 0===e}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(e){if(!isNumber(e)||e<0||isNaN(e))throw TypeError(\"n must be a positive number\");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){var t,n,i,s,r,o;if(this._events||(this._events={}),\"error\"===e&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified \"error\" event.')}if(n=this._events[e],isUndefined(n))return!1;if(isFunction(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,s=new Array(i-1),r=1;r<i;r++)s[r-1]=arguments[r];n.apply(this,s)}else if(isObject(n)){for(i=arguments.length,s=new Array(i-1),r=1;r<i;r++)s[r-1]=arguments[r];for(o=n.slice(),i=o.length,r=0;r<i;r++)o[r].apply(this,s)}return!0},EventEmitter.prototype.addListener=function(e,t){var n;if(!isFunction(t))throw TypeError(\"listener must be a function\");if(this._events||(this._events={}),this._events.newListener&&this.emit(\"newListener\",e,isFunction(t.listener)?t.listener:t),this._events[e]?isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,isObject(this._events[e])&&!this._events[e].warned){var n;n=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error(\"(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.\",this._events[e].length),\"function\"==typeof console.trace&&console.trace())}return this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!isFunction(t))throw TypeError(\"listener must be a function\");var i=!1;return n.listener=t,this.on(e,n),this},EventEmitter.prototype.removeListener=function(e,t){var n,i,s,r;if(!isFunction(t))throw TypeError(\"listener must be a function\");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,i=-1,n===t||isFunction(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit(\"removeListener\",e,t);else if(isObject(n)){for(r=s;r-- >0;)if(n[r]===t||n[r].listener&&n[r].listener===t){i=r;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit(\"removeListener\",e,t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)\"removeListener\"!==t&&this.removeAllListeners(t);return this.removeAllListeners(\"removeListener\"),this._events={},this}if(n=this._events[e],isFunction(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?isFunction(e._events[t])?1:e._events[t].length:0};","function drainQueue(){if(!draining){draining=!0;for(var e,o=queue.length;o;){e=queue,queue=[];for(var r=-1;++r<o;)e[r]();o=queue.length}draining=!1}}function noop(){}var process=module.exports={},queue=[],draining=!1;process.nextTick=function(e){queue.push(e),draining||setTimeout(drainQueue,0)},process.title=\"browser\",process.browser=!0,process.env={},process.argv=[],process.version=\"\",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(e){throw new Error(\"process.binding is not supported\")},process.cwd=function(){return\"/\"},process.chdir=function(e){throw new Error(\"process.chdir is not supported\")},process.umask=function(){return 0};","(function (process,global){\n!function(t){\"use strict\";function r(t,r,e,o){var i=Object.create((r||n).prototype),a=new h(o||[]);return i._invoke=f(t,e,a),i}function e(t,r,e){try{return{type:\"normal\",arg:t.call(r,e)}}catch(t){return{type:\"throw\",arg:t}}}function n(){}function o(){}function i(){}function a(t){[\"next\",\"throw\",\"return\"].forEach(function(r){t[r]=function(t){return this._invoke(r,t)}})}function c(t){this.arg=t}function u(t){function r(n,o,i,a){var u=e(t[n],t,o);if(\"throw\"!==u.type){var f=u.arg,l=f.value;return l instanceof c?Promise.resolve(l.arg).then(function(t){r(\"next\",t,i,a)},function(t){r(\"throw\",t,i,a)}):Promise.resolve(l).then(function(t){f.value=t,i(f)},a)}a(u.arg)}function n(t,e){function n(){return new Promise(function(n,o){r(t,e,n,o)})}return o=o?o.then(n,n):n()}\"object\"==typeof process&&process.domain&&(r=process.domain.bind(r));var o;this._invoke=n}function f(t,r,n){var o=b;return function(i,a){if(o===j)throw new Error(\"Generator is already running\");if(o===_){if(\"throw\"===i)throw a;return y()}for(;;){var c=n.delegate;if(c){if(\"return\"===i||\"throw\"===i&&c.iterator[i]===v){n.delegate=null;var u=c.iterator.return;if(u){var f=e(u,c.iterator,a);if(\"throw\"===f.type){i=\"throw\",a=f.arg;continue}}if(\"return\"===i)continue}var f=e(c.iterator[i],c.iterator,a);if(\"throw\"===f.type){n.delegate=null,i=\"throw\",a=f.arg;continue}i=\"next\",a=v;var l=f.arg;if(!l.done)return o=E,l;n[c.resultName]=l.value,n.next=c.nextLoc,n.delegate=null}if(\"next\"===i)n.sent=n._sent=a;else if(\"throw\"===i){if(o===b)throw o=_,a;n.dispatchException(a)&&(i=\"next\",a=v)}else\"return\"===i&&n.abrupt(\"return\",a);o=j;var f=e(t,r,n);if(\"normal\"===f.type){o=n.done?_:E;var l={value:f.arg,done:n.done};if(f.arg!==k)return l;n.delegate&&\"next\"===i&&(a=v)}else\"throw\"===f.type&&(o=_,i=\"throw\",a=f.arg)}}}function l(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function s(t){var r=t.completion||{};r.type=\"normal\",delete r.arg,t.completion=r}function h(t){this.tryEntries=[{tryLoc:\"root\"}],t.forEach(l,this),this.reset(!0)}function p(t){if(t){var r=t[w];if(r)return r.call(t);if(\"function\"==typeof t.next)return t;if(!isNaN(t.length)){var e=-1,n=function r(){for(;++e<t.length;)if(g.call(t,e))return r.value=t[e],r.done=!1,r;return r.value=v,r.done=!0,r};return n.next=n}}return{next:y}}function y(){return{value:v,done:!0}}var v,g=Object.prototype.hasOwnProperty,d=\"function\"==typeof Symbol?Symbol:{},w=d.iterator||\"@@iterator\",m=d.toStringTag||\"@@toStringTag\",L=\"object\"==typeof module,x=t.regeneratorRuntime;if(x)return void(L&&(module.exports=x));x=t.regeneratorRuntime=L?module.exports:{},x.wrap=r;var b=\"suspendedStart\",E=\"suspendedYield\",j=\"executing\",_=\"completed\",k={},G=i.prototype=n.prototype;o.prototype=G.constructor=i,i.constructor=o,i[m]=o.displayName=\"GeneratorFunction\",x.isGeneratorFunction=function(t){var r=\"function\"==typeof t&&t.constructor;return!!r&&(r===o||\"GeneratorFunction\"===(r.displayName||r.name))},x.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,i):(t.__proto__=i,m in t||(t[m]=\"GeneratorFunction\")),t.prototype=Object.create(G),t},x.awrap=function(t){return new c(t)},a(u.prototype),x.async=function(t,e,n,o){var i=new u(r(t,e,n,o));return x.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},a(G),G[w]=function(){return this},G[m]=\"Generator\",G.toString=function(){return\"[object Generator]\"},x.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},x.values=p,h.prototype={constructor:h,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.tryEntries.forEach(s),!t)for(var r in this)\"t\"===r.charAt(0)&&g.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=v)},stop:function(){this.done=!0;var t=this.tryEntries[0],r=t.completion;if(\"throw\"===r.type)throw r.arg;return this.rval},dispatchException:function(t){function r(r,n){return i.type=\"throw\",i.arg=t,e.next=r,!!n}if(this.done)throw t;for(var e=this,n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if(\"root\"===o.tryLoc)return r(\"end\");if(o.tryLoc<=this.prev){var a=g.call(o,\"catchLoc\"),c=g.call(o,\"finallyLoc\");if(a&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error(\"try statement without catch or finally\");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&g.call(n,\"finallyLoc\")&&this.prev<n.finallyLoc){var o=n;break}}o&&(\"break\"===t||\"continue\"===t)&&o.tryLoc<=r&&r<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=r,o?this.next=o.finallyLoc:this.complete(i),k},complete:function(t,r){if(\"throw\"===t.type)throw t.arg;\"break\"===t.type||\"continue\"===t.type?this.next=t.arg:\"return\"===t.type?(this.rval=t.arg,this.next=\"end\"):\"normal\"===t.type&&r&&(this.next=r)},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),s(e),k}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if(\"throw\"===n.type){var o=n.arg;s(e)}return o}}throw new Error(\"illegal catch attempt\")},delegateYield:function(t,r,e){return this.delegate={iterator:p(t),resultName:r,nextLoc:e},k}}}(\"object\"==typeof global?global:\"object\"==typeof window?window:\"object\"==typeof self?self:this);\n}).call(this,require('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9yZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIhZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcih0LHIsZSxvKXt2YXIgaT1PYmplY3QuY3JlYXRlKChyfHxuKS5wcm90b3R5cGUpLGE9bmV3IGgob3x8W10pO3JldHVybiBpLl9pbnZva2U9Zih0LGUsYSksaX1mdW5jdGlvbiBlKHQscixlKXt0cnl7cmV0dXJue3R5cGU6XCJub3JtYWxcIixhcmc6dC5jYWxsKHIsZSl9fWNhdGNoKHQpe3JldHVybnt0eXBlOlwidGhyb3dcIixhcmc6dH19fWZ1bmN0aW9uIG4oKXt9ZnVuY3Rpb24gbygpe31mdW5jdGlvbiBpKCl7fWZ1bmN0aW9uIGEodCl7W1wibmV4dFwiLFwidGhyb3dcIixcInJldHVyblwiXS5mb3JFYWNoKGZ1bmN0aW9uKHIpe3Rbcl09ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2ludm9rZShyLHQpfX0pfWZ1bmN0aW9uIGModCl7dGhpcy5hcmc9dH1mdW5jdGlvbiB1KHQpe2Z1bmN0aW9uIHIobixvLGksYSl7dmFyIHU9ZSh0W25dLHQsbyk7aWYoXCJ0aHJvd1wiIT09dS50eXBlKXt2YXIgZj11LmFyZyxsPWYudmFsdWU7cmV0dXJuIGwgaW5zdGFuY2VvZiBjP1Byb21pc2UucmVzb2x2ZShsLmFyZykudGhlbihmdW5jdGlvbih0KXtyKFwibmV4dFwiLHQsaSxhKX0sZnVuY3Rpb24odCl7cihcInRocm93XCIsdCxpLGEpfSk6UHJvbWlzZS5yZXNvbHZlKGwpLnRoZW4oZnVuY3Rpb24odCl7Zi52YWx1ZT10LGkoZil9LGEpfWEodS5hcmcpfWZ1bmN0aW9uIG4odCxlKXtmdW5jdGlvbiBuKCl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKG4sbyl7cih0LGUsbixvKX0pfXJldHVybiBvPW8/by50aGVuKG4sbik6bigpfVwib2JqZWN0XCI9PXR5cGVvZiBwcm9jZXNzJiZwcm9jZXNzLmRvbWFpbiYmKHI9cHJvY2Vzcy5kb21haW4uYmluZChyKSk7dmFyIG87dGhpcy5faW52b2tlPW59ZnVuY3Rpb24gZih0LHIsbil7dmFyIG89YjtyZXR1cm4gZnVuY3Rpb24oaSxhKXtpZihvPT09ail0aHJvdyBuZXcgRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBydW5uaW5nXCIpO2lmKG89PT1fKXtpZihcInRocm93XCI9PT1pKXRocm93IGE7cmV0dXJuIHkoKX1mb3IoOzspe3ZhciBjPW4uZGVsZWdhdGU7aWYoYyl7aWYoXCJyZXR1cm5cIj09PWl8fFwidGhyb3dcIj09PWkmJmMuaXRlcmF0b3JbaV09PT12KXtuLmRlbGVnYXRlPW51bGw7dmFyIHU9Yy5pdGVyYXRvci5yZXR1cm47aWYodSl7dmFyIGY9ZSh1LGMuaXRlcmF0b3IsYSk7aWYoXCJ0aHJvd1wiPT09Zi50eXBlKXtpPVwidGhyb3dcIixhPWYuYXJnO2NvbnRpbnVlfX1pZihcInJldHVyblwiPT09aSljb250aW51ZX12YXIgZj1lKGMuaXRlcmF0b3JbaV0sYy5pdGVyYXRvcixhKTtpZihcInRocm93XCI9PT1mLnR5cGUpe24uZGVsZWdhdGU9bnVsbCxpPVwidGhyb3dcIixhPWYuYXJnO2NvbnRpbnVlfWk9XCJuZXh0XCIsYT12O3ZhciBsPWYuYXJnO2lmKCFsLmRvbmUpcmV0dXJuIG89RSxsO25bYy5yZXN1bHROYW1lXT1sLnZhbHVlLG4ubmV4dD1jLm5leHRMb2Msbi5kZWxlZ2F0ZT1udWxsfWlmKFwibmV4dFwiPT09aSluLnNlbnQ9bi5fc2VudD1hO2Vsc2UgaWYoXCJ0aHJvd1wiPT09aSl7aWYobz09PWIpdGhyb3cgbz1fLGE7bi5kaXNwYXRjaEV4Y2VwdGlvbihhKSYmKGk9XCJuZXh0XCIsYT12KX1lbHNlXCJyZXR1cm5cIj09PWkmJm4uYWJydXB0KFwicmV0dXJuXCIsYSk7bz1qO3ZhciBmPWUodCxyLG4pO2lmKFwibm9ybWFsXCI9PT1mLnR5cGUpe289bi5kb25lP186RTt2YXIgbD17dmFsdWU6Zi5hcmcsZG9uZTpuLmRvbmV9O2lmKGYuYXJnIT09aylyZXR1cm4gbDtuLmRlbGVnYXRlJiZcIm5leHRcIj09PWkmJihhPXYpfWVsc2VcInRocm93XCI9PT1mLnR5cGUmJihvPV8saT1cInRocm93XCIsYT1mLmFyZyl9fX1mdW5jdGlvbiBsKHQpe3ZhciByPXt0cnlMb2M6dFswXX07MSBpbiB0JiYoci5jYXRjaExvYz10WzFdKSwyIGluIHQmJihyLmZpbmFsbHlMb2M9dFsyXSxyLmFmdGVyTG9jPXRbM10pLHRoaXMudHJ5RW50cmllcy5wdXNoKHIpfWZ1bmN0aW9uIHModCl7dmFyIHI9dC5jb21wbGV0aW9ufHx7fTtyLnR5cGU9XCJub3JtYWxcIixkZWxldGUgci5hcmcsdC5jb21wbGV0aW9uPXJ9ZnVuY3Rpb24gaCh0KXt0aGlzLnRyeUVudHJpZXM9W3t0cnlMb2M6XCJyb290XCJ9XSx0LmZvckVhY2gobCx0aGlzKSx0aGlzLnJlc2V0KCEwKX1mdW5jdGlvbiBwKHQpe2lmKHQpe3ZhciByPXRbd107aWYocilyZXR1cm4gci5jYWxsKHQpO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHQubmV4dClyZXR1cm4gdDtpZighaXNOYU4odC5sZW5ndGgpKXt2YXIgZT0tMSxuPWZ1bmN0aW9uIHIoKXtmb3IoOysrZTx0Lmxlbmd0aDspaWYoZy5jYWxsKHQsZSkpcmV0dXJuIHIudmFsdWU9dFtlXSxyLmRvbmU9ITEscjtyZXR1cm4gci52YWx1ZT12LHIuZG9uZT0hMCxyfTtyZXR1cm4gbi5uZXh0PW59fXJldHVybntuZXh0Onl9fWZ1bmN0aW9uIHkoKXtyZXR1cm57dmFsdWU6dixkb25lOiEwfX12YXIgdixnPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksZD1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2w/U3ltYm9sOnt9LHc9ZC5pdGVyYXRvcnx8XCJAQGl0ZXJhdG9yXCIsbT1kLnRvU3RyaW5nVGFnfHxcIkBAdG9TdHJpbmdUYWdcIixMPVwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUseD10LnJlZ2VuZXJhdG9yUnVudGltZTtpZih4KXJldHVybiB2b2lkKEwmJihtb2R1bGUuZXhwb3J0cz14KSk7eD10LnJlZ2VuZXJhdG9yUnVudGltZT1MP21vZHVsZS5leHBvcnRzOnt9LHgud3JhcD1yO3ZhciBiPVwic3VzcGVuZGVkU3RhcnRcIixFPVwic3VzcGVuZGVkWWllbGRcIixqPVwiZXhlY3V0aW5nXCIsXz1cImNvbXBsZXRlZFwiLGs9e30sRz1pLnByb3RvdHlwZT1uLnByb3RvdHlwZTtvLnByb3RvdHlwZT1HLmNvbnN0cnVjdG9yPWksaS5jb25zdHJ1Y3Rvcj1vLGlbbV09by5kaXNwbGF5TmFtZT1cIkdlbmVyYXRvckZ1bmN0aW9uXCIseC5pc0dlbmVyYXRvckZ1bmN0aW9uPWZ1bmN0aW9uKHQpe3ZhciByPVwiZnVuY3Rpb25cIj09dHlwZW9mIHQmJnQuY29uc3RydWN0b3I7cmV0dXJuISFyJiYocj09PW98fFwiR2VuZXJhdG9yRnVuY3Rpb25cIj09PShyLmRpc3BsYXlOYW1lfHxyLm5hbWUpKX0seC5tYXJrPWZ1bmN0aW9uKHQpe3JldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsaSk6KHQuX19wcm90b19fPWksbSBpbiB0fHwodFttXT1cIkdlbmVyYXRvckZ1bmN0aW9uXCIpKSx0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEcpLHR9LHguYXdyYXA9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBjKHQpfSxhKHUucHJvdG90eXBlKSx4LmFzeW5jPWZ1bmN0aW9uKHQsZSxuLG8pe3ZhciBpPW5ldyB1KHIodCxlLG4sbykpO3JldHVybiB4LmlzR2VuZXJhdG9yRnVuY3Rpb24oZSk/aTppLm5leHQoKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiB0LmRvbmU/dC52YWx1ZTppLm5leHQoKX0pfSxhKEcpLEdbd109ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sR1ttXT1cIkdlbmVyYXRvclwiLEcudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIltvYmplY3QgR2VuZXJhdG9yXVwifSx4LmtleXM9ZnVuY3Rpb24odCl7dmFyIHI9W107Zm9yKHZhciBlIGluIHQpci5wdXNoKGUpO3JldHVybiByLnJldmVyc2UoKSxmdW5jdGlvbiBlKCl7Zm9yKDtyLmxlbmd0aDspe3ZhciBuPXIucG9wKCk7aWYobiBpbiB0KXJldHVybiBlLnZhbHVlPW4sZS5kb25lPSExLGV9cmV0dXJuIGUuZG9uZT0hMCxlfX0seC52YWx1ZXM9cCxoLnByb3RvdHlwZT17Y29uc3RydWN0b3I6aCxyZXNldDpmdW5jdGlvbih0KXtpZih0aGlzLnByZXY9MCx0aGlzLm5leHQ9MCx0aGlzLnNlbnQ9dGhpcy5fc2VudD12LHRoaXMuZG9uZT0hMSx0aGlzLmRlbGVnYXRlPW51bGwsdGhpcy50cnlFbnRyaWVzLmZvckVhY2gocyksIXQpZm9yKHZhciByIGluIHRoaXMpXCJ0XCI9PT1yLmNoYXJBdCgwKSYmZy5jYWxsKHRoaXMscikmJiFpc05hTigrci5zbGljZSgxKSkmJih0aGlzW3JdPXYpfSxzdG9wOmZ1bmN0aW9uKCl7dGhpcy5kb25lPSEwO3ZhciB0PXRoaXMudHJ5RW50cmllc1swXSxyPXQuY29tcGxldGlvbjtpZihcInRocm93XCI9PT1yLnR5cGUpdGhyb3cgci5hcmc7cmV0dXJuIHRoaXMucnZhbH0sZGlzcGF0Y2hFeGNlcHRpb246ZnVuY3Rpb24odCl7ZnVuY3Rpb24gcihyLG4pe3JldHVybiBpLnR5cGU9XCJ0aHJvd1wiLGkuYXJnPXQsZS5uZXh0PXIsISFufWlmKHRoaXMuZG9uZSl0aHJvdyB0O2Zvcih2YXIgZT10aGlzLG49dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO24+PTA7LS1uKXt2YXIgbz10aGlzLnRyeUVudHJpZXNbbl0saT1vLmNvbXBsZXRpb247aWYoXCJyb290XCI9PT1vLnRyeUxvYylyZXR1cm4gcihcImVuZFwiKTtpZihvLnRyeUxvYzw9dGhpcy5wcmV2KXt2YXIgYT1nLmNhbGwobyxcImNhdGNoTG9jXCIpLGM9Zy5jYWxsKG8sXCJmaW5hbGx5TG9jXCIpO2lmKGEmJmMpe2lmKHRoaXMucHJldjxvLmNhdGNoTG9jKXJldHVybiByKG8uY2F0Y2hMb2MsITApO2lmKHRoaXMucHJldjxvLmZpbmFsbHlMb2MpcmV0dXJuIHIoby5maW5hbGx5TG9jKX1lbHNlIGlmKGEpe2lmKHRoaXMucHJldjxvLmNhdGNoTG9jKXJldHVybiByKG8uY2F0Y2hMb2MsITApfWVsc2V7aWYoIWMpdGhyb3cgbmV3IEVycm9yKFwidHJ5IHN0YXRlbWVudCB3aXRob3V0IGNhdGNoIG9yIGZpbmFsbHlcIik7aWYodGhpcy5wcmV2PG8uZmluYWxseUxvYylyZXR1cm4gcihvLmZpbmFsbHlMb2MpfX19fSxhYnJ1cHQ6ZnVuY3Rpb24odCxyKXtmb3IodmFyIGU9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO2U+PTA7LS1lKXt2YXIgbj10aGlzLnRyeUVudHJpZXNbZV07aWYobi50cnlMb2M8PXRoaXMucHJldiYmZy5jYWxsKG4sXCJmaW5hbGx5TG9jXCIpJiZ0aGlzLnByZXY8bi5maW5hbGx5TG9jKXt2YXIgbz1uO2JyZWFrfX1vJiYoXCJicmVha1wiPT09dHx8XCJjb250aW51ZVwiPT09dCkmJm8udHJ5TG9jPD1yJiZyPD1vLmZpbmFsbHlMb2MmJihvPW51bGwpO3ZhciBpPW8/by5jb21wbGV0aW9uOnt9O3JldHVybiBpLnR5cGU9dCxpLmFyZz1yLG8/dGhpcy5uZXh0PW8uZmluYWxseUxvYzp0aGlzLmNvbXBsZXRlKGkpLGt9LGNvbXBsZXRlOmZ1bmN0aW9uKHQscil7aWYoXCJ0aHJvd1wiPT09dC50eXBlKXRocm93IHQuYXJnO1wiYnJlYWtcIj09PXQudHlwZXx8XCJjb250aW51ZVwiPT09dC50eXBlP3RoaXMubmV4dD10LmFyZzpcInJldHVyblwiPT09dC50eXBlPyh0aGlzLnJ2YWw9dC5hcmcsdGhpcy5uZXh0PVwiZW5kXCIpOlwibm9ybWFsXCI9PT10LnR5cGUmJnImJih0aGlzLm5leHQ9cil9LGZpbmlzaDpmdW5jdGlvbih0KXtmb3IodmFyIHI9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO3I+PTA7LS1yKXt2YXIgZT10aGlzLnRyeUVudHJpZXNbcl07aWYoZS5maW5hbGx5TG9jPT09dClyZXR1cm4gdGhpcy5jb21wbGV0ZShlLmNvbXBsZXRpb24sZS5hZnRlckxvYykscyhlKSxrfX0sY2F0Y2g6ZnVuY3Rpb24odCl7Zm9yKHZhciByPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTtyPj0wOy0tcil7dmFyIGU9dGhpcy50cnlFbnRyaWVzW3JdO2lmKGUudHJ5TG9jPT09dCl7dmFyIG49ZS5jb21wbGV0aW9uO2lmKFwidGhyb3dcIj09PW4udHlwZSl7dmFyIG89bi5hcmc7cyhlKX1yZXR1cm4gb319dGhyb3cgbmV3IEVycm9yKFwiaWxsZWdhbCBjYXRjaCBhdHRlbXB0XCIpfSxkZWxlZ2F0ZVlpZWxkOmZ1bmN0aW9uKHQscixlKXtyZXR1cm4gdGhpcy5kZWxlZ2F0ZT17aXRlcmF0b3I6cCh0KSxyZXN1bHROYW1lOnIsbmV4dExvYzplfSxrfX19KFwib2JqZWN0XCI9PXR5cGVvZiBnbG9iYWw/Z2xvYmFsOlwib2JqZWN0XCI9PXR5cGVvZiB3aW5kb3c/d2luZG93Olwib2JqZWN0XCI9PXR5cGVvZiBzZWxmP3NlbGY6dGhpcyk7Il19","\"use strict\";\n\nclass Gzip extends require('./worker-messenger') {\n  constructor() {\n    super('js/gzip-worker.js');\n  }\n\n  compress(svgData) {\n    return this._requestResponse({\n      data: svgData\n    });\n  }\n}\n\nmodule.exports = Gzip;","\"use strict\";\n\n// This is in its own file rather than utils.js because it's used for loading polyfills,\n// and promises, is one of the things that gets polyfilled, hence the callbacks\nmodule.exports = function loadScript(urls, yeyCallback, neyCallback) {\n  var count = urls.length;\n  var errored = false;\n\n  if (urls.length == 0) return yeyCallback();\n\n  urls.forEach(url => {\n    var script = document.createElement('script');\n    script.onload = function() {\n      if (errored) return;\n      if (!--count) yeyCallback();\n    };\n    script.onerror = function() {\n      if (errored) return;\n      neyCallback();\n      errored = true;\n    };\n    script.src = url;\n    document.head.insertBefore(script, document.head.firstChild);\n  });\n};","\"use strict\";\n\nvar utils = require('./utils');\nvar svgo = new (require('./svgo'));\nvar storage = require('../utils/storage');\n\nvar SvgFile = require('./svg-file');\n\nclass MainController {\n  constructor() {\n    this._container = null;\n\n    // ui components\n    this._mainUi = null;\n    this._outputUi = new (require('./ui/output'));\n    this._downloadButtonUi = new (require('./ui/download-button'));\n    this._copyButtonUi = new (require('./ui/copy-button'));\n    this._bgFillUi = new (require('./ui/bg-fill'));\n    this._resultsUi = new (require('./ui/results'));\n    this._settingsUi = new (require('./ui/settings'));\n    this._mainMenuUi = new (require('./ui/main-menu'));\n    this._toastsUi = new (require('./ui/toasts'));\n    this._dropUi = new (require('./ui/file-drop'));\n    this._preloaderUi = new (require('./ui/preloader'));\n    this._changelogUi = new (require('./ui/changelog'))(self.version);\n    this._resultsContainerUi = new (require('./ui/results-container'))(this._resultsUi);\n    this._viewTogglerUi = new (require('./ui/view-toggler'));\n\n    // ui events\n    this._settingsUi.on('change', _ => this._onSettingsChange());\n    this._mainMenuUi.on('svgDataLoad', e => this._onInputChange(e));\n    this._dropUi.on('svgDataLoad', e => this._onInputChange(e));\n    this._mainMenuUi.on('error', ({error}) => this._handleError(error));\n    this._viewTogglerUi.on('change', e => this._onViewSelectionChange(e));\n\n    // state\n    this._inputFilename = 'image.svg';\n    this._inputSvg = null;\n    this._cache = new (require('./results-cache'))(10);\n    this._latestCompressJobId = 0;\n    this._userHasInteracted = false;\n\n    if ('serviceWorker' in navigator) {\n      navigator.serviceWorker.register('sw.js', {\n        scope: './'\n      }).then(registration => {\n        registration.addEventListener('updatefound', _ => this._onUpdateFound(registration));\n      });\n    }\n\n    // tell the user about the latest update\n    storage.get('last-seen-version').then(lastSeenVersion => {\n      if (lastSeenVersion) {\n        this._changelogUi.showLogFrom(lastSeenVersion);\n      }\n      storage.set('last-seen-version', self.version);\n    });\n\n    utils.domReady.then(_ => {\n      this._container = document.querySelector('.app-output');\n\n      // elements for intro anim\n      this._mainUi = new (require('./ui/main-ui'))(\n        document.querySelector('.toolbar'),\n        document.querySelector('.action-button-container'),\n        this._outputUi.container,\n        this._settingsUi.container\n      );\n\n      const actionContainer = document.querySelector('.action-button-container');\n      const minorActionContainer = document.querySelector('.minor-action-container');\n\n      minorActionContainer.appendChild(this._bgFillUi.container);\n\n      if (document.queryCommandSupported && document.queryCommandSupported('copy')) {\n        minorActionContainer.appendChild(this._copyButtonUi.container);\n      }\n      \n      actionContainer.appendChild(this._downloadButtonUi.container);\n      document.querySelector('.output').appendChild(this._outputUi.container);\n      this._container.appendChild(this._toastsUi.container);\n      this._container.appendChild(this._dropUi.container);\n      document.querySelector('.menu-extra').appendChild(this._changelogUi.container);\n\n      // someone managed to hit the preloader, aww\n      if (this._preloaderUi.activated) {\n        this._toastsUi.show(\"Ready now!\", {\n          duration: 3000\n        });\n      }\n\n      /*\n      // for testing\n      async _ => {\n        this._onInputChange({\n          data: await utils.get('test-svgs/car-lite.svg'),\n          filename: 'car.svg'\n        });\n      }();\n      */\n    });\n  }\n\n  _onViewSelectionChange(event) {\n    this._outputUi.set(event.value);\n  }\n\n  _onUpdateFound(registration) {\n    var newWorker = registration.installing;\n\n    registration.installing.addEventListener('statechange', async _ => {\n      // the very first activation!\n      // tell the user stuff works offline\n      if (newWorker.state == 'activated' && !navigator.serviceWorker.controller) {\n        this._toastsUi.show(\"Ready to work offline\", {\n          duration: 5000\n        });\n        return;\n      }\n\n      if (newWorker.state == 'installed' && navigator.serviceWorker.controller) {\n        var activeVersion = await storage.get('active-version');\n\n        // activeVersion is undefined for sw-null\n        // if the main version has changed, bail\n        if (activeVersion && activeVersion.split('.')[0] != self.version.split('.')[0]) return;\n\n        // if the user hasn't interacted yet, do a sneaky reload\n        if (!this._userHasInteracted) {\n          location.reload();\n          return;\n        }\n\n        // otherwise, show the user an alert\n        var toast = this._toastsUi.show(\"Update available\", {\n          buttons: ['reload', 'dismiss']\n        });\n\n        var answer = await toast.answer;\n\n        if (answer == 'reload') {\n          location.reload();\n        }\n      }\n    });\n  }\n\n  _onSettingsChange() {\n    this._compressSvg();\n  }\n\n  async _onInputChange(event) {\n    this._userHasInteracted = true;\n\n    try {\n      this._inputSvg = await svgo.load(event.data);\n      this._inputFilename = event.filename;\n    }\n    catch(e) {\n      e.message = \"Load failed: \" + e.message;\n      this._mainMenuUi.stopSpinner();\n      this._handleError(e);\n      return;\n    }\n\n    this._cache.purge();\n\n    var firstItteration = true;\n    this._compressSvg(_ => {\n      if (firstItteration) {\n        this._outputUi.reset();\n        this._mainUi.activate();\n        this._mainMenuUi.allowHide = true;\n        this._mainMenuUi.hide();\n        firstItteration = false;\n      }\n    });\n\n  }\n\n  _handleError(e) {\n    this._toastsUi.show(e.message);\n    console.error(e);\n  }\n\n  async _compressSvg(itterationCallback = function(){}) {\n    var thisJobId = this._latestCompressJobId = Math.random();\n    var settings = this._settingsUi.getSettings();\n\n    await svgo.abortCurrent();\n\n    if (thisJobId != this._latestCompressJobId) {\n      // while we've been waiting, there's been a newer call\n      // to _compressSvg, we don't need to do anything\n      return;\n    }\n\n    if (settings.original) {\n      this._updateForFile(this._inputSvg, {\n        gzip: settings.gzip\n      });\n      return;\n    }\n\n    var cacheMatch = this._cache.match(settings.fingerprint);\n\n    if (cacheMatch) {\n      this._updateForFile(cacheMatch, {\n        compareToFile: this._inputSvg,\n        gzip: settings.gzip\n      });\n      return;\n    }\n\n    this._downloadButtonUi.working();\n\n    try {\n      var finalResultFile = await svgo.process(settings, resultFile => {\n        itterationCallback(resultFile);\n        this._updateForFile(resultFile, {\n          compareToFile: this._inputSvg,\n          gzip: settings.gzip\n        });\n      });\n      this._cache.add(settings.fingerprint, finalResultFile);\n    }\n    catch(e) {\n      if (e.message != \"abort\") { // TODO: should really be switching on error type\n        e.message = \"Minifying error: \" + e.message;\n        this._handleError(e);\n      }\n    }\n\n    this._downloadButtonUi.done();\n  }\n\n  async _updateForFile(svgFile, {compareToFile, gzip}) {\n    this._outputUi.update(svgFile);\n    this._downloadButtonUi.setDownload(this._inputFilename, svgFile);\n    this._copyButtonUi.setSVG(svgFile);\n\n    this._resultsUi.update({\n      comparisonSize: compareToFile && (await compareToFile.size({ compress: gzip })),\n      size: await svgFile.size({ compress: gzip })\n    });\n  }\n}\n\nmodule.exports = MainController;\n","\"use strict\";\n\nclass Prism extends require('./worker-messenger') {\n  constructor() {\n    super('js/prism-worker.js');\n  }\n\n  highlight(svgData) {\n    return this._requestResponse({\n      data: svgData\n    });\n  }\n}\n\nmodule.exports = Prism;","\"use strict\";\n\nclass ResultsCache {\n  constructor(size) {\n    this._size = size;\n    this.purge();\n  }\n\n  purge() {\n    this._fingerprints = [];\n    this._files = [];\n    this._index = 0;\n  }\n\n  add(fingerprint, file) {\n    var oldItem = this._files[this._index];\n\n    if (oldItem) {\n      // gc blob url\n      oldItem.release();\n    }\n\n    this._fingerprints[this._index] = fingerprint;\n    this._files[this._index] = file;\n\n    this._index = (this._index + 1) % this._size;\n  }\n\n  match(fingerprint) {\n    return this._files[this._fingerprints.indexOf(fingerprint)];\n  }\n}\n\nmodule.exports = ResultsCache;","\"use strict\";\n\nvar gzip = new (require('./gzip'));\n\nclass SvgFile {\n  constructor(text, width, height) {\n    this.text = text;\n    this._compressedSize = null;\n    this._url = '';\n    this._blob = null;\n    this.width = width;\n    this.height = height;\n  }\n\n  async size({ compress }) {\n    if (!compress) {\n      return this.text.length;\n    }\n\n    if (!this._compressedSize) {\n      this._compressedSize = gzip.compress(this.text)\n        .then(r => r.byteLength);\n    }\n\n    return this._compressedSize;\n  }\n\n  _create() {\n    // IE GCs blobs once they're out of reference, even if they\n    // have an object url, so we have to keep in in reference.\n    this._blob = new Blob([this.text], {type: \"image/svg+xml\"});\n    this._url = URL.createObjectURL(this._blob);\n  }\n\n  get blob() {\n    if (!this._blob) this._create();\n    return this._blob;\n  }\n\n  get url() {\n    if (!this._url) this._create();\n    return this._url;\n  }\n\n  release() {\n    if (!this._url) {\n      return;\n    }\n\n    this._blob = null;\n    URL.revokeObjectURL(this._url);\n  }\n}\n\nmodule.exports = SvgFile;","\"use strict\";\n\nvar SvgFile = require('./svg-file');\n\nclass Svgo extends require('./worker-messenger') {\n  constructor() {\n    super('js/svgo-worker.js');\n    this._multiPass = false;\n    this._abortOnNextItter = false;\n    this._currentJob = Promise.resolve();\n  }\n\n  load(svgText) {\n    return this._requestResponse({\n      action: 'load',\n      data: svgText\n    }).then(({width, height}) => {\n      return new SvgFile(svgText, width, height);\n    });\n  }\n\n  process(settings, itterationCallback) {\n    return this._currentJob = this.abortCurrent().then(async _ => {\n      this._abortOnNextItter = false;\n\n      var result = await this._requestResponse({\n        action: 'process',\n        settings\n      });\n\n      var resultFile = new SvgFile(result.data, result.dimensions.width, result.dimensions.height);\n\n      itterationCallback(resultFile);\n\n      if (settings.multipass) {\n        while (result = await this.nextPass()) {\n          if (this._abortOnNextItter) {\n            throw Error('abort');\n          }\n          resultFile = new SvgFile(result.data, result.dimensions.width, result.dimensions.height);\n          itterationCallback(resultFile);\n        }\n      }\n\n      // return final result\n      return resultFile;\n    });\n  }\n\n  nextPass() {\n    return this._requestResponse({\n      action: 'nextPass'\n    });\n  }\n\n  async abortCurrent() {\n    this._abortOnNextItter = true;\n\n    try {\n      await this._currentJob;\n    } catch(e){}\n  }\n}\n\nmodule.exports = Svgo;","var utils = require('../utils');\nvar Ripple = require('./ripple');\n\nclass BgFillButton {\n  constructor() {\n    this.container = utils.strToEl(\n      '<div role=\"button\" tabindex=\"0\" class=\"fillAB minor-floating-action-button\">' +\n        '<svg viewBox=\"0 0 24 24\" class=\"icon\">' +\n          '<title>Background Fill</title>' +\n          '<path d=\"M21.143 9.667c-.733-1.392-1.914-3.05-3.617-4.753-2.977-2.978-5.478-3.914-6.785-3.914-.414 0-.708.094-.86.246l-1.361 1.36c-1.899-.236-3.42.106-4.294.983-.876.875-1.164 2.159-.792 3.523.492 1.806 2.305 4.049 5.905 5.375.038.323.157.638.405.885.588.588 1.535.586 2.121 0s.588-1.533.002-2.119c-.588-.587-1.537-.588-2.123-.001l-.17.256c-2.031-.765-3.395-1.828-4.232-2.9l3.879-3.875c.496 2.73 6.432 8.676 9.178 9.178l-7.115 7.107c-.234.153-2.798-.316-6.156-3.675-3.393-3.393-3.175-5.271-3.027-5.498l1.859-1.856c-.439-.359-.925-1.103-1.141-1.689l-2.134 2.131c-.445.446-.685 1.064-.685 1.82 0 1.634 1.121 3.915 3.713 6.506 2.764 2.764 5.58 4.243 7.432 4.243.648 0 1.18-.195 1.547-.562l8.086-8.078c.91.874-.778 3.538-.778 4.648 0 1.104.896 1.999 2 1.999 1.105 0 2-.896 2-2 0-3.184-1.425-6.81-2.857-9.34zm-16.209-5.371c.527-.53 1.471-.791 2.656-.761l-3.209 3.206c-.236-.978-.049-1.845.553-2.445zm9.292 4.079l-.03-.029c-1.292-1.292-3.803-4.356-3.096-5.063.715-.715 3.488 1.521 5.062 3.096.862.862 2.088 2.247 2.937 3.458-1.717-1.074-3.491-1.469-4.873-1.462z\"/>' +\n        '</svg>' +\n      '</div>' +\n    '');\n\n    this._ripple = new Ripple();\n    this.container.appendChild(this._ripple.container);\n\n    this.container.addEventListener('click', event => this._onClick(event));\n  }\n\n  _onClick(event) {\n    // event adds a background color\n    if (this.container.classList.contains('active')) {\n      this.container.classList.remove('active');\n      this.setColor('transparent');\n    } else {\n      this.container.classList.add('active');\n      this.setColor('#f444fe');\n    }\n    this._ripple.animate();\n  }\n\n  setColor(color) {\n    document.documentElement.style.backgroundColor = color;\n  }\n}\n\nmodule.exports = BgFillButton;\n","var utils = require('../utils');\n\nclass Changelog {\n  constructor(loadedVersion) {\n    this.container = utils.strToEl('<section class=\"changelog\"></section>');\n    this._loadedVersion = loadedVersion;\n  }\n\n  async showLogFrom(lastLoadedVersion) {\n    if (lastLoadedVersion == this._loadedVersion) return;\n    var changelog = await utils.get('changelog.json').then(JSON.parse);\n    var startIndex = 0;\n    var endIndex = 0;\n    \n    for (var i = 0; i < changelog.length; i++) {\n      let entry = changelog[i];\n\n      if (entry.version === this._loadedVersion) {\n        startIndex = i;\n      }\n      else if (entry.version === lastLoadedVersion) {\n        break;\n      }\n      endIndex = i + 1;\n    }\n\n    var changeLis = changelog.slice(startIndex, endIndex).reduce((arr, entry) => {\n      return arr.concat(entry.changes);\n    }, []).map(function(change) {\n      return utils.escapeHtmlTag`<li>${change}</li>`;\n    });\n\n    this.container.appendChild(utils.strToEl('<h1>Updated!</h1>'));\n    this.container.appendChild(utils.strToEl(\n      '<ul>' +\n        changeLis.join('') +\n      '</ul>' +\n    ''));\n\n    await utils.domReady;\n    utils.transitionToClass(this.container);\n  }\n}\n\nmodule.exports = Changelog;","var utils = require('../utils');\nvar prism = new (require('../prism'));\n\nclass CodeOutput {\n  constructor() {\n    this.container = utils.strToEl(\n      '<div class=\"code-output\">' +\n        '<pre><code></code></pre>' +\n      '</div>' +\n    '');\n    this._codeEl = this.container.querySelector('code');\n  }\n\n  async setSvg(svgFile) {\n    this._codeEl.innerHTML = await prism.highlight(svgFile.text);\n  }\n\n  reset() {\n    this._codeEl.innerHTML = '';\n  }\n}\n\nmodule.exports = CodeOutput;","var utils = require('../utils');\nvar Ripple = require('./ripple');\n\nclass CopyButton {\n  constructor() {\n    this.container = utils.strToEl(\n      '<div role=\"button\" tabindex=\"0\" class=\"minor-floating-action-button\">' +\n        '<svg viewBox=\"0 0 24 24\" class=\"icon\">' +\n          '<title>Copy</title>' +\n          '<path d=\"M16 1H4C3 1 2 2 2 3v14h2V3h12V1zm3 4H8C7 5 6 6 6 7v14c0 1 1 2 2 2h11c1 0 2-1 2-2V7c0-1-1-2-2-2zm0 16H8V7h11v14z\"/>' +\n        '</svg>' +\n      '</div>' +\n    '');\n\n    this._ripple = new Ripple();\n    this.container.appendChild(this._ripple.container);\n\n    this._svgFile = null;\n    this._pre = document.createElement('pre');\n\n    this.container.addEventListener('click', event => this._onClick(event));\n  }\n\n  _onClick(event) {\n    this._pre.textContent = this._svgFile.text;\n    document.body.appendChild(this._pre);\n    getSelection().removeAllRanges();\n    var range = document.createRange();\n    range.selectNode(this._pre);\n    window.getSelection().addRange(range);\n    document.execCommand('copy');\n    getSelection().removeAllRanges();\n    document.body.removeChild(this._pre);\n    this._ripple.animate();\n  }\n\n  setSVG(svgFile) {\n    this._svgFile = svgFile;\n  }\n}\n\nmodule.exports = CopyButton;\n","var utils = require('../utils');\nvar Spinner = require('./spinner');\n\nclass DownloadButton {\n  constructor() {\n    this.container = utils.strToEl(\n      '<a href=\"./\" class=\"floating-action-button\">' +\n        '<svg viewBox=\"0 0 24 24\" class=\"icon\">' +\n          '<title>Download output</title>' +\n          '<path d=\"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z\"/>' +\n        '</svg>' +\n      '</a>' +\n    '');\n    this._spinner = new Spinner();\n    this.container.appendChild(this._spinner.container);\n    this._svgFile = null;\n\n    // IE compat\n    if ('msSaveBlob' in navigator) {\n      this.container.addEventListener('click', event => {\n        event.preventDefault();\n        navigator.msSaveBlob(this._svgFile.blob, this.container.download);\n      });\n    }\n  }\n\n  setDownload(filename, svgFile) {\n    this.container.download = filename;\n    this.container.href = svgFile.url;\n\n    // for IE compat\n    this._svgFile = svgFile;\n  }\n\n  working() {\n    this._spinner.show(500);\n  }\n\n  done() {\n    this._spinner.hide();\n  }\n}\n\nmodule.exports = DownloadButton;","var utils = require('../utils');\n\nclass FileDrop extends (require('events').EventEmitter) {\n  constructor() {\n    super();\n    this.container = utils.strToEl(\n      '<div class=\"drop-overlay\">Drop it!</div>' +\n    '');\n\n    // drag events are horrid\n    this._activeEnters = 0;\n    this._currentEnteredElement = null;\n\n    utils.domReady.then(_ => {\n      document.addEventListener('dragover', event => event.preventDefault());\n      document.addEventListener('dragenter', event => this._onDragEnter(event));\n      document.addEventListener('dragleave', event => this._onDragLeave(event));\n      document.addEventListener('drop', event => this._onDrop(event));\n    });\n  }\n\n  _onDragEnter(event) {\n    // firefox double-fires on window enter, this works around it\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1124645\n    if (this._currentEnteredElement == event.target) return;\n    this._currentEnteredElement = event.target;\n\n    if (!this._activeEnters++) {\n      utils.transitionToClass(this.container);\n    }\n  }\n\n  _onDragLeave(event) {\n    this._currentEnteredElement = null;\n    \n    if (!--this._activeEnters) {\n      utils.transitionFromClass(this.container);\n    }\n  }\n\n  async _onDrop(event) {\n    event.preventDefault();\n\n    utils.transitionFromClass(this.container);\n    var file = event.dataTransfer.files[0];\n\n    this.emit('svgDataLoad', {\n      data: await utils.readFileAsText(file),\n      filename: file.name\n    });\n  }\n}\n\nmodule.exports = FileDrop;","\"use strict\";\n\nvar utils = require('../utils');\nvar Spinner = require('./spinner');\n\nclass MainMenu extends (require('events').EventEmitter) {\n  constructor() {\n    super();\n\n    this.allowHide = false;\n    this._spinner = new Spinner();\n\n    utils.domReady.then(_ => {\n      this.container = document.querySelector('.main-menu');\n      this._selectFileInput = document.querySelector('.select-file-input');\n      this._pasteInput = document.querySelector('.paste-input');\n      this._loadDemoBtn = document.querySelector('.load-demo');\n      this._selectFileBtn = document.querySelector('.select-file');\n      this._pasteLabel = document.querySelector('.menu-input');\n      this._overlay = this.container.querySelector('.overlay');\n      this._menu = this.container.querySelector('.menu');\n\n      document.querySelector('.menu-btn')\n        .addEventListener('click', e => this._onMenuButtonClick(e));\n\n      this._overlay.addEventListener('click', e => this._onOverlayClick(e));\n\n      this._selectFileBtn.addEventListener('click', e => this._onSelectFileClick(e));\n      this._loadDemoBtn.addEventListener('click', e => this._onLoadDemoClick(e));\n      this._selectFileInput.addEventListener('change', e => this._onFileInputChange(e));\n      this._pasteInput.addEventListener('input', e => this._onTextInputChange(e));\n    });\n  }\n\n  show() {\n    this.container.classList.remove('hidden');\n    utils.transitionFromClass(this._overlay, 'hidden');\n    utils.transitionFromClass(this._menu, 'hidden');\n  }\n\n  hide() {\n    if (!this.allowHide) {\n      return;\n    }\n    this.stopSpinner();\n    this.container.classList.add('hidden');\n    utils.transitionToClass(this._overlay, 'hidden');\n    utils.transitionToClass(this._menu, 'hidden');\n  }\n\n  stopSpinner() {\n    this._spinner.hide();\n  }\n\n  _onOverlayClick(event) {\n    event.preventDefault();\n    this.hide();\n  }\n\n  _onMenuButtonClick(event) {\n    event.preventDefault();\n    this.show();\n  }\n\n  _onTextInputChange(event) {\n    var val = this._pasteInput.value.trim();\n\n    if (val.indexOf('</svg>') != -1) {\n      this._pasteInput.value = '';\n      this._pasteInput.blur();\n\n      this._pasteLabel.appendChild(this._spinner.container);\n      this._spinner.show();\n\n      this.emit('svgDataLoad', {\n        data: val,\n        filename: 'image.svg'\n      });\n    }\n  }\n\n  _onSelectFileClick(event) {\n    event.preventDefault();\n    event.target.blur();\n    this._selectFileInput.click();\n  }\n\n  async _onFileInputChange(event) {\n    var file = this._selectFileInput.files[0];\n\n    if (!file) {\n      return;\n    }\n\n    this._selectFileBtn.appendChild(this._spinner.container);\n    this._spinner.show();\n\n    this.emit('svgDataLoad', {\n      data: await utils.readFileAsText(file),\n      filename: file.name\n    });\n  }\n\n  async _onLoadDemoClick(event) {\n    event.preventDefault();\n    event.target.blur();\n    this._loadDemoBtn.appendChild(this._spinner.container);\n    this._spinner.show();\n\n    try {\n      this.emit('svgDataLoad', {\n        data: await utils.get('test-svgs/car-lite.svg'),\n        filename: 'car.svg'\n      });\n    }\n    catch (error) {\n      this.stopSpinner();\n\n      var e;\n\n      if ('serviceWorker' in navigator && navigator.serviceWorker.controller) {\n        e = Error(\"Demo not available offline\");\n      }\n      else {\n        e = Error(\"Couldn't fetch demo SVG\");\n      }\n\n      this.emit('error', {\n        error: e\n      });\n    }\n  }\n}\n\nmodule.exports = MainMenu;","var utils = require('../utils');\n\nclass MainUi {\n  constructor(...elements) {\n    this._activated = false;\n    this._toActivate = elements;\n  }\n\n  activate() {\n    if (this._activated) return;\n    this._activated = true;\n\n    return Promise.all(\n      this._toActivate.map(el => utils.transitionToClass(el))\n    );\n  }\n}\n\nmodule.exports = MainUi;","var utils = require('../utils');\n\nclass MaterialSlider {\n  constructor(rangeEl) {\n    this.container = utils.strToEl(`\n      <div class=\"material-slider\">\n        <div class=\"track\">\n          <div class=\"track-on\"></div>\n          <div class=\"handle\">\n            <div class=\"arrow\"></div>\n            <div class=\"val\"></div>\n          </div>\n        </div>\n      </div>\n    `);\n\n    this.range = rangeEl;\n    this._handle = this.container.querySelector('.handle');\n    this._trackOn = this.container.querySelector('.track-on');\n    this._val = this.container.querySelector('.val');\n\n    rangeEl.parentNode.insertBefore(this.container, rangeEl);\n    this.container.insertBefore(rangeEl, this.container.firstChild);\n\n    // events\n    // thanks IE\n    var rangeChangeEvent = utils.isIe ? 'change' : 'input';\n\n    rangeEl.addEventListener(rangeChangeEvent, e => this._onInputChange(e));\n    this.range.addEventListener('mousedown', e => this._onRangeMouseDown(e));\n    this.range.addEventListener('touchstart', e => this._onRangeTouchStart(e));\n    this.range.addEventListener('touchend', e => this._onRangeTouchEnd(e));\n\n    this._setPosition();\n  }\n\n  _onRangeTouchStart(event) {\n    this.range.focus();\n  }\n\n  _onRangeTouchEnd(event) {\n    this.range.blur();\n  }\n\n  _onRangeMouseDown(event) {\n    this.range.classList.add('active');\n\n    var upListener = e => {\n      // IE requires me to do this. Pah.\n      requestAnimationFrame(_ => {\n        this.range.blur();\n      })\n      this.range.classList.remove('active');\n      document.removeEventListener('mouseup', upListener);\n    }\n    document.addEventListener('mouseup', upListener);\n  }\n\n  _onInputChange(event) {\n    requestAnimationFrame(_ => this._setPosition());\n  }\n\n  _setPosition() {\n    var { min, max, value } = this.range;\n    var percent = (Number(value) - min) / (max - min);\n    this._trackOn.style.width = \n      this._handle.style.left = percent * 100 + \"%\";\n\n    this._val.textContent = value;\n  }\n}\n\nmodule.exports = MaterialSlider;","var utils = require('../utils');\n\nclass Output {\n  constructor() {\n    this.container = utils.strToEl(\n      '<div class=\"output-switcher\"></div>' +\n    '');\n\n    this._types = {\n      image: new (require('./svg-output')),\n      code: new (require('./code-output'))\n    };\n\n    this._svgFile = null;\n    this._switchQueue = Promise.resolve();\n    this.set('image', {noAnimate: true});\n  }\n\n  update(svgFile) {\n    this._svgFile = svgFile;\n    return this._types[this._activeType].setSvg(svgFile);\n  }\n\n  reset() {\n    this._types[this._activeType].reset();\n  }\n\n  set(type, {\n    noAnimate = false\n  }={}) {\n    return this._switchQueue = this._switchQueue.then(async _ => {\n      var toRemove;\n      var toAdd;\n\n      if (this._activeType) {\n        toRemove = this._types[this._activeType].container;\n      }\n\n      this._activeType = type;\n      toAdd = this._types[this._activeType].container;\n      this.container.appendChild(toAdd);\n\n      if (this._svgFile) await this.update(this._svgFile);\n\n      if (noAnimate) {\n        toAdd.classList.add('active');\n        if (toRemove) toRemove.classList.remove('active');\n      }\n      else {\n        let transitions = [\n          utils.transitionToClass(toAdd)\n        ];\n\n        if (toRemove) transitions.push(utils.transitionFromClass(toRemove));\n\n        await Promise.all(transitions);\n      }\n\n      if (toRemove) {\n        this.container.removeChild(toRemove);\n      }\n    })\n  }\n}\n\nmodule.exports = Output;","var utils = require('../utils');\n\nfunction getXY(obj) {\n  return {\n    x: obj.pageX,\n    y: obj.pageY\n  };\n}\n\nfunction touchDistance(touch1, touch2) {\n  var dx = Math.abs(touch2.x - touch1.x);\n  var dy = Math.abs(touch2.y - touch1.y);\n  return Math.sqrt(dx*dx + dy*dy);\n}\n\nfunction getMidpoint(point1, point2) {\n  return {\n    x: (point1.x + point2.x) / 2,\n    y: (point1.y + point2.y) / 2\n  };\n}\n\nfunction getPoints(event) {\n  if (event.touches) {\n    return Array.prototype.map.call(event.touches, getXY);\n  }\n  else {\n    return [getXY(event)];\n  }\n}\n\nclass PanZoom {\n  constructor(target, {\n    eventArea = target,\n    shouldCaptureFunc = function(el){ return true; }\n  }={}) {\n    this._target = target;\n    this._shouldCaptureFunc = shouldCaptureFunc;\n    this._dx = 0;\n    this._dy = 0;\n    this._scale = 1;\n    this._active = 0;\n    this._lastPoints = [];\n\n    // bind\n    [\n      '_onPointerDown',\n      '_onPointerMove',\n      '_onPointerUp'\n    ].forEach(funcName => {\n      this[funcName] = this[funcName].bind(this);\n    })\n\n    // bound events\n    eventArea.addEventListener('mousedown', this._onPointerDown);\n    eventArea.addEventListener('touchstart', this._onPointerDown);\n\n    // unbonud\n    eventArea.addEventListener('wheel', e => this._onWheel(e));\n  }\n\n  reset() {\n    this._dx = 0;\n    this._dy = 0;\n    this._scale = 1;\n    this._update();\n  }\n\n  _onWheel(event) {\n    if (!this._shouldCaptureFunc(event.target)) return;\n    event.preventDefault();\n\n    var boundingRect = this._target.getBoundingClientRect();\n    var delta = event.deltaY;\n\n    if (event.deltaMode === 1) { // 1 is \"lines\", 0 is \"pixels\"\n      // Firefox uses \"lines\" when mouse is connected\n      delta *= 15;\n    }\n\n    // stop mouse wheel producing huge values\n    delta = Math.max(Math.min(delta, 60), -60);\n\n    var scaleDiff = (delta / 300) + 1;\n\n    // avoid to-small values\n    if (this._scale * scaleDiff < 0.05) return;\n\n    this._scale *= scaleDiff;\n    this._dx -= (event.pageX - boundingRect.left) * (scaleDiff - 1);\n    this._dy -= (event.pageY - boundingRect.top) * (scaleDiff - 1);\n    this._update();\n  }\n\n  _onFirstPointerDown(event) {\n    document.addEventListener('mousemove', this._onPointerMove);\n    document.addEventListener('mouseup', this._onPointerUp);\n    document.addEventListener('touchmove', this._onPointerMove);\n    document.addEventListener('touchend', this._onPointerUp);\n  }\n\n  _onPointerDown(event) {\n    if (event.type == 'mousedown' && event.which != 1) return;\n    if (!this._shouldCaptureFunc(event.target)) return;\n    event.preventDefault();\n\n    this._lastPoints = getPoints(event);\n    this._active++;\n\n    if (this._active === 1) {\n      this._onFirstPointerDown(event);\n    }\n  }\n\n  _onPointerMove(event) {\n    event.preventDefault();\n    var points = getPoints(event);\n    var averagePoint = points.reduce(getMidpoint);\n    var averageLastPoint = this._lastPoints.reduce(getMidpoint);\n    var boundingRect = this._target.getBoundingClientRect();\n\n    this._dx += averagePoint.x - averageLastPoint.x;\n    this._dy += averagePoint.y - averageLastPoint.y;\n\n    if (points[1]) {\n      var scaleDiff = touchDistance(points[0], points[1]) / touchDistance(this._lastPoints[0], this._lastPoints[1]);\n      this._scale *= scaleDiff;\n      this._dx -= (averagePoint.x - boundingRect.left) * (scaleDiff - 1);\n      this._dy -= (averagePoint.y - boundingRect.top) * (scaleDiff - 1);\n    }\n\n    this._update();\n    this._lastPoints = points;\n  }\n\n  _update() {\n    this._target.style.WebkitTransform = this._target.style.transform\n      = 'translate3d(' + this._dx + 'px, ' + this._dy + 'px, 0) scale(' + this._scale + ')';\n  }\n\n  _onPointerUp(event) {\n    event.preventDefault();\n    this._active--;\n    this._lastPoints.pop();\n\n    if (this._active) {\n      this._lastPoints = getPoints(event);\n      return;\n    }\n\n    document.removeEventListener('mousemove', this._onPointerMove);\n    document.removeEventListener('mouseup', this._onPointerUp);\n    document.removeEventListener('touchmove', this._onPointerMove);\n    document.removeEventListener('touchend', this._onPointerUp);\n  }\n}\n\nmodule.exports = PanZoom;\n","var utils = require('../utils');\n\nclass Preloader {\n  constructor() {\n    utils.domReady.then(_ => {\n      this.container = document.querySelector('.preloader');\n      this.activated = this.container.classList.contains('active');\n      this.hide();\n    });\n  }\n\n  async hide() {\n    await utils.transitionFromClass(this.container, 'active');\n    this.container.style.display = 'none';\n  }\n}\n\nmodule.exports = Preloader;","var utils = require('../utils');\n\nclass ResultsContainer {\n  constructor(results) {\n    this._results = results;\n\n    utils.domReady.then(_ => {\n      this._mobileContainer = document.querySelector('.results-container-mobile');\n      this._container = document.querySelector('.results-container');\n      this._query = matchMedia('(min-width: 640px)');\n\n      this._query.addListener(_ => this._positionResults());\n      this._positionResults();\n    });\n  }\n\n  _positionResults() {\n    if (this._query.matches) {\n      this._container.appendChild(this._results.container);\n    }\n    else {\n      this._mobileContainer.appendChild(this._results.container);\n    }\n  }\n}\n\nmodule.exports = ResultsContainer;","var utils = require('../utils');\n\nfunction round(num, places) {\n  var mult = Math.pow(10, places);\n  return Math.floor(Math.round(num * mult)) / mult;\n}\n\nfunction humanSize(bytes) { // TODO: I'm sure there's a better version of this\n  if (bytes < 1024) {\n    return bytes + ' bytes';\n  }\n  else {\n    return round(bytes / 1024, 2) + 'k';\n  }\n}\n\nclass Results {\n  constructor() {\n    this.container = utils.strToEl(\n      '<div class=\"results\">' +\n        '<span class=\"size\"></span>' +\n        '<span class=\"diff\"></span>' +\n      '</div>' +\n    '');\n    this._sizeEl = this.container.querySelector('.size');\n    this._diffEl = this.container.querySelector('.diff');\n  }\n\n  update({size, comparisonSize}) {\n    this._sizeEl.textContent = humanSize(size);\n    \n    // just displaying a single size?\n    if (!comparisonSize) {\n      this._diffEl.textContent = '';\n      return;\n    }\n    else if (size == comparisonSize) {\n      this._diffEl.textContent = ' - no change';\n    }\n    else if (size > comparisonSize) {\n      this._diffEl.textContent = ' - ' + round(size / comparisonSize * 100 - 100, 2) + '% increase';\n    }\n    else {\n      this._diffEl.textContent = ' - ' + round(100 - size / comparisonSize * 100, 2) + '% saving';\n    }\n  }\n}\n\nmodule.exports = Results;","var utils = require('../utils');\n\nclass Ripple {\n  constructor() {\n    this.container = utils.strToEl('<div class=\"ripple\"></div>');\n  }\n\n  animate() {\n    this.container.classList.remove('animate');\n    this.container.offsetLeft;\n    this.container.classList.add('animate');\n  }\n}\n\nmodule.exports = Ripple;\n","\"use strict\"\n\nvar utils = require('../utils');\nvar Slider = require('./material-slider');\n\nclass Settings extends (require('events').EventEmitter) {\n  constructor() {\n    super();\n\n    this._throttleTimeout = null;\n\n    utils.domReady.then(_ => {\n      this._pluginInputs = utils.toArray(\n        document.querySelectorAll('.settings .plugins input')\n      );\n      this._globalInputs = utils.toArray(\n        document.querySelectorAll('.settings .global input')\n      );\n\n      utils.toArray(\n        document.querySelectorAll('.settings input[type=range]')\n      ).forEach(el => new Slider(el));\n\n      this.container = document.querySelector('.settings');\n      this._scroller = document.querySelector('.settings-scroller');\n\n      this.container.addEventListener('change', e => this._onChange(e));\n      this.container.addEventListener('input', e => this._onChange(e));\n      this._scroller.addEventListener('wheel', e => this._onMouseWheel(e));\n      \n      // Stop double-tap text selection.\n      // This stops all text selection which is kinda sad.\n      // I think this code will bite me.\n      this._scroller.addEventListener('mousedown', e => {\n        if (utils.closest(e.target, 'input[type=range]')) return;\n        e.preventDefault();\n      });\n    });\n  }\n\n  _onMouseWheel(event) {\n    // Prevents bounce effect on desktop.\n    // Firefox uses DELTA_LINE on a mouse wheel, ignore it\n    if (!event.deltaMode) { // 0 is \"pixels\"\n      event.preventDefault();\n      event.currentTarget.scrollTop += event.deltaY;\n    }\n  }\n\n  _onChange(event) {\n    // IE fires the change event rather than input for ranges\n    if (!utils.isIe && event.type == 'change' && event.target.type == 'range') {\n      // for ranges, the change event is just a dupe of the\n      // final input event\n      return;\n    }\n\n    clearTimeout(this._throttleTimeout);\n\n    // throttle range\n    if (event.target.type == 'range') {\n      this._throttleTimeout = setTimeout(_ => this.emit('change'), 150);\n    }\n    else {\n      this.emit('change');\n    }\n\n  }\n\n  getSettings() {\n    // fingerprint is used for cache lookups\n    var fingerprint = [];\n\n    var output = {\n      plugins: {}\n    };\n    \n    this._globalInputs.forEach(function(inputEl) {\n      if (inputEl.name != 'gzip' && inputEl.name != 'original') {\n        if (inputEl.type == 'checkbox') {\n          fingerprint.push(Number(inputEl.checked));\n        }\n        else {\n          fingerprint.push('|' + inputEl.value + '|');\n        }\n      }\n      \n      if (inputEl.type == 'checkbox') {\n        output[inputEl.name] = inputEl.checked;\n      }\n      else {\n        output[inputEl.name] = inputEl.value;\n      }\n    });\n\n    this._pluginInputs.forEach(function(inputEl) {\n      fingerprint.push(Number(inputEl.checked));\n      output.plugins[inputEl.name] = inputEl.checked;\n    });\n\n    output.fingerprint = fingerprint.join();\n\n    return output;\n  }\n}\n\nmodule.exports = Settings;","var utils = require('../utils');\n\nclass Spinner {\n  constructor() {\n    this.container = utils.strToEl(\n      '<div class=\"spinner\">' +\n        '<div class=\"spinner-container\">' +\n          '<div class=\"spinner-layer\">' +\n            '<div class=\"circle-clipper left\">' +\n              '<div class=\"circle\"></div>' +\n            '</div>' +\n            '<div class=\"gap-patch\">' +\n              '<div class=\"circle\"></div>' +\n            '</div>' +\n            '<div class=\"circle-clipper right\">' +\n              '<div class=\"circle\"></div>' +\n            '</div>' +\n          '</div>' +\n        '</div>' +\n      '</div>' +\n    '');\n\n    this._showTimeout = null;\n    this.container.style.display = 'none';\n\n    var animEndListener = event => {\n      if (event.target == this.container) {\n        this.container.style.display = 'none';\n      }\n    };\n\n    this.container.addEventListener('webkitAnimationEnd', animEndListener);\n    this.container.addEventListener('animationend', animEndListener);\n  }\n\n  show(delay = 300) {\n    clearTimeout(this._showTimeout);\n    this.container.style.display = 'none';\n    this.container.classList.remove('cooldown');\n    this._showTimeout = setTimeout(_ => {\n      this.container.style.display = '';\n    }, delay);\n  }\n\n  hide() {\n    clearTimeout(this._showTimeout);\n    this.container.classList.add('cooldown');\n  }\n}\n\nmodule.exports = Spinner;","var utils = require('../utils');\nvar PanZoom = require('./pan-zoom');\n\nclass SvgOutput {\n  constructor() {\n    // IE doesn't support datauris or blob urls in iframe :(\n    // TODO: feature detect this & report bug\n    var frameHtml = utils.isIe ?\n      '<img class=\"svg-frame\">' :\n      '<iframe class=\"svg-frame\" sandbox=\"allow-scripts\"></iframe>';\n\n    this.container = utils.strToEl(\n      '<div class=\"svg-output\">' +\n        '<div class=\"svg-container\">' +\n          frameHtml +\n        '</div>' +\n        // Stop touches going into the iframe.\n        // pointer-events + touch + iframe doesn't work in Chrome :(\n        '<div class=\"svg-clickjacker\"></div>' +\n      '</div>' +\n    '');\n\n\n    this._svgFrame = this.container.querySelector('.svg-frame');\n    this._svgFrame.scrolling = 'no';\n\n    this._svgContainer = this.container.querySelector('.svg-container');\n\n    utils.domReady.then(_ => {\n      this._panZoom = new PanZoom(this._svgContainer, {\n        eventArea: this.container\n      });\n    });\n  }\n\n  setSvg(svgFile) {\n    // I would rather use blob urls, but they don't work in Firefox\n    // All the internal refs break.\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1125667\n    var nextLoad = this._nextLoadPromise();\n    this._svgFrame.src = \"data:image/svg+xml;charset=utf-8,\" + encodeURIComponent(svgFile.text);\n    this._svgFrame.width = svgFile.width;\n    this._svgFrame.height = svgFile.height;\n    return nextLoad;\n  }\n\n  reset() {\n    this._svgFrame.src = \"about:blank\";\n    this._panZoom.reset();\n  }\n\n  _nextLoadPromise() {\n    return new Promise(resolve => {\n      var onload = _ => {\n        this._svgFrame.removeEventListener('load', onload);\n        resolve();\n      }\n      this._svgFrame.addEventListener('load', onload);\n    });\n  }\n}\n\nmodule.exports = SvgOutput;\n","var utils = require('../utils');\n\nclass Toast {\n  constructor(message, duration, buttons) {\n    this.container = utils.strToEl(\n      '<div class=\"toast\"><div class=\"toast-content\"></div></div>' +\n    '');\n\n    this._content = this.container.querySelector('.toast-content');\n    this._content.textContent = message;\n    this._answerResolve;\n    this._hideTimeout;\n\n    this.answer = new Promise(r => this._answerResolve = r);\n\n    buttons.forEach(button => {\n      var buttonEl = document.createElement('button');\n      buttonEl.className = 'unbutton';\n      buttonEl.textContent = button;\n      buttonEl.addEventListener('click', event => {\n        this._answerResolve(button);\n      });\n      this.container.appendChild(buttonEl);\n    });\n\n    if (duration) {\n      this._hideTimeout = setTimeout(_ => this.hide(), duration);\n    }\n  }\n\n  hide() {\n    clearTimeout(this._hideTimeout);\n    this._answerResolve();\n    return utils.transitionToClass(this.container, 'hide');\n  }\n}\n\nclass Toasts {\n  constructor() {\n    this.container = utils.strToEl(\"<div class='toasts'></div>\");\n  }\n\n  show(message, {\n    duration = 0,\n    buttons = ['dismiss']\n  }={}) {\n    var toast = new Toast(message, duration, buttons);\n    this.container.appendChild(toast.container);\n\n    toast.answer.then(_ => toast.hide()).then(_ => {\n      this.container.removeChild(toast.container);\n    });\n\n    return toast;\n  }\n}\n\nmodule.exports = Toasts;","var utils = require('../utils');\n\nclass ViewToggler extends (require('events').EventEmitter) {\n  constructor() {\n    super();\n    this.container = null;\n\n    utils.domReady.then(_ => {\n      this.container = document.querySelector('.view-toggler');\n\n      // stop browsers remembering previous form state\n      this.container.output[0].checked = true;\n\n      this.container.addEventListener('change', e => this._onChange(e));\n    });\n  }\n\n  _onChange(event) {\n    var value = this.container.output.value;\n\n    if (!value) { // some browsers don't support the nice shortcut above (eg Safari)\n      value = utils.toArray(this.container.output).reduce((value, input) => {\n        return value || (input.checked ? input.value : '');\n      }, '');\n    }\n\n    this.emit(\"change\", {\n      value: value\n    });\n  }\n}\n\nmodule.exports = ViewToggler;","\"use strict\";\n\nexports.toArray = function toArray(obj) {\n  return Array.prototype.slice.apply(obj);\n};\n\nexports.domReady = new Promise(function(resolve) {\n  function checkState() {\n    if (document.readyState != 'loading') {\n      resolve();\n    }\n  }\n  document.addEventListener('readystatechange', checkState);\n  checkState();\n});\n\nexports.get = function get(url) {\n  return new Promise(function(resolve, reject) {\n    var req = new XMLHttpRequest();\n    req.open('GET', url);\n\n    req.onload = function() {\n      if (req.status == 200) {\n        resolve(req.response);\n      }\n      else {\n        reject(Error(req.statusText));\n      }\n    };\n    req.onerror = function() {\n      reject(Error(\"Network Error\"));\n    };\n\n    req.send();\n  });\n};\n\nexports.strToEl = (function () {\n  var tmpEl = document.createElement('div');\n  return function (str) {\n    var r;\n    tmpEl.innerHTML = str;\n    r = tmpEl.children[0];\n    while (tmpEl.firstChild) {\n      tmpEl.removeChild(tmpEl.firstChild);\n    }\n    return r;\n  };\n}());\n\nvar entityMap = {\n  \"&\": \"&amp;\",\n  \"<\": \"&lt;\",\n  \">\": \"&gt;\",\n  '\"': '&quot;',\n  \"'\": '&#39;',\n  \"/\": '&#x2F;'\n};\n\nexports.escapeHtml = function escapeHTML(string) {\n  return String(string).replace(/[&<>\"'\\/]/g, function (s) {\n    return entityMap[s];\n  });\n};\n\nexports.escapeHtmlTag = function(strings, ...values) {\n  values = values.map(exports.escapeHtml);\n  return strings.reduce((str, val, i) => str += val + (values[i] || ''), '');\n};\n\nexports.readFileAsText = function readFileAsText(file) {\n  return new Promise(function(resolve, reject) {\n    var reader = new FileReader();\n    reader.readAsText(file);\n    reader.onerror = function() {\n      reject(reader.error);\n    };\n    reader.onload = function() {\n      resolve(reader.result);\n    };\n  });\n}\n\nfunction transitionClassFunc({removeClass = false}={}) {\n  return function(el, className = 'active', transitionClass = 'transition') {\n    if (removeClass) {\n      if (!el.classList.contains(className)) return Promise.resolve();\n    }\n    else {\n      if (el.classList.contains(className)) return Promise.resolve();\n    }\n\n    return new Promise(resolve => {\n      var listener = event => {\n        if (event.target != el) return;\n        el.removeEventListener('webkitTransitionEnd', listener);\n        el.removeEventListener('transitionend', listener);\n        el.classList.remove(transitionClass);\n        resolve();\n      };\n\n      el.classList.add(transitionClass);\n\n      requestAnimationFrame(_ => {\n        el.addEventListener('webkitTransitionEnd', listener);\n        el.addEventListener('transitionend', listener);\n        el.classList[removeClass ? 'remove' : 'add'](className);\n      });\n    });\n  }\n}\n\nexports.transitionToClass = transitionClassFunc();\nexports.transitionFromClass = transitionClassFunc({removeClass: true});\n\nexports.closest = function(el, selector) {\n  if (el.closest) {\n    return el.closest(selector);\n  }\n\n  var matches = el.matches || el.msMatchesSelector;\n\n  do {\n    if (el.nodeType != 1) continue;\n    if (matches.call(el, selector)) return el;\n  } while (el = el.parentNode);\n\n  return undefined;\n};\n\n// I hate that I have to do this\nexports.isIe = (navigator.userAgent.indexOf('Trident/') !== -1);\n\nexports.loadCss = function(url) {\n  return new Promise((resolve, reject) => {\n    var link = document.createElement('link');\n    link.rel = 'stylesheet';\n    link.href = url;\n\n    link.addEventListener('load', _ => resolve());\n    link.addEventListener('error', _ => reject());\n\n    document.head.appendChild(link);\n  });\n};\n\nexports.trackFocusMethod = function() {\n  var focusMethod = 'mouse';\n\n  document.body.addEventListener('focus', event => {\n    event.target.classList.add(focusMethod == 'key' ? 'key-focused' : 'mouse-focused');\n  }, true);\n\n  document.body.addEventListener('blur', event => {\n    event.target.classList.remove('key-focused');\n    event.target.classList.remove('mouse-focused');\n  }, true);\n\n  document.body.addEventListener('keydown', event => {\n    focusMethod = 'key';\n  }, true);\n\n  document.body.addEventListener('mousedown', event => {\n    focusMethod = 'mouse';\n  }, true);\n};\n","\"use strict\";\n\nclass WorkerMessenger {\n  constructor(url) {\n    this._requestId = 0;\n    this._worker = new Worker(url);\n\n    // worker jobs awaiting response {callId: [resolve, reject]}\n    this._pending = {};\n\n    this._worker.onmessage = event => this._onMessage(event);\n  }\n\n  _onMessage(event) {\n    if (!event.data.id) {\n      console.log(\"Unexpected message\", event);\n      return;\n    }\n\n    var resolver = this._pending[event.data.id];\n\n    if (!resolver) {\n      console.log(\"No resolver for\", event);\n      return;\n    }\n\n    delete this._pending[event.data.id];\n\n    if (event.data.error) {\n      resolver[1](new Error(event.data.error));\n      return;\n    }\n\n    resolver[0](event.data.result);\n  }\n\n  _requestResponse(message) {\n    var workerMessenger = this;\n    var requestId = ++this._requestId;\n    message.id = requestId;\n\n    return new Promise(function(resolve, reject) {\n      workerMessenger._pending[requestId] = [resolve, reject];\n      workerMessenger._worker.postMessage(message);\n    });\n  }\n}\n\nmodule.exports = WorkerMessenger;","'use strict';\n\nfunction promisifyRequest(obj) {\n  return new Promise(function(resolve, reject) {\n    function onsuccess(event) {\n      resolve(obj.result);\n      unlisten();\n    }\n    function onerror(event) {\n      reject(obj.error);\n      unlisten();\n    }\n    function unlisten() {\n      obj.removeEventListener('complete', onsuccess);\n      obj.removeEventListener('success', onsuccess);\n      obj.removeEventListener('error', onerror);\n      obj.removeEventListener('abort', onerror);\n    }\n    obj.addEventListener('complete', onsuccess);\n    obj.addEventListener('success', onsuccess);\n    obj.addEventListener('error', onerror);\n    obj.addEventListener('abort', onerror);\n  });\n}\n\nclass IndexedDouchebag {\n  constructor(name, version, upgradeCallback) {\n    var request = indexedDB.open(name, version);\n    this.ready = promisifyRequest(request);\n    request.onupgradeneeded = function(event) {\n      upgradeCallback(request.result, event.oldVersion);\n    };\n  }\n\n  transaction(stores, modeOrCallback, callback) {\n    return this.ready.then(function(db) {\n      var mode = 'readonly';\n\n      if (modeOrCallback.apply) {\n        callback = modeOrCallback;\n      }\n      else if (modeOrCallback) {\n        mode = modeOrCallback;\n      }\n\n      var tx = db.transaction(stores, mode);\n      var val = callback(tx, db);\n      var promise = promisifyRequest(tx);\n      var readPromise;\n\n      if (!val) {\n        return promise;\n      }\n\n      if (val[0] && 'result' in val[0]) {\n        readPromise = Promise.all(val.map(promisifyRequest));\n      }\n      else {\n        readPromise = promisifyRequest(val);\n      }\n\n      return promise.then(function() {\n        return readPromise;\n      });\n    });\n  };\n\n  get(store, key) {\n    return this.transaction(store, function(tx) {\n      return tx.objectStore(store).get(key);\n    });\n  };\n\n  put(store, key, value) {\n    return this.transaction(store, 'readwrite', function(tx) {\n      tx.objectStore(store).put(value, key);\n    });\n  };\n\n  delete(store, key) {\n    return this.transaction(store, 'readwrite', function(tx) {\n      tx.objectStore(store).delete(key);\n    });\n  };\n}\n\nmodule.exports = IndexedDouchebag;","var Idb = require('./indexeddouchbag');\nvar idb;\n\n// avoid opening idb until first call\nfunction getIdb() {\n  if (!idb) {\n    idb = new Idb('svgo-keyval', 1, function(db) {\n      db.createObjectStore('keyval');\n    });\n  }\n  return idb;\n}\n\nif (self.indexedDB) {\n  module.exports = {\n    get: key => getIdb().get('keyval', key),\n    set: (key, val) => getIdb().put('keyval', key, val),\n    delete: key => getIdb().delete('keyval', key)\n  };\n}\nelse {\n  module.exports = {\n    get: key => Promise.resolve(localStorage.getItem(key)),\n    set: (key, val) => Promise.resolve(localStorage.setItem(key, val)),\n    delete: key => Promise.resolve(localStorage.removeItem(key))\n  };\n}"]}